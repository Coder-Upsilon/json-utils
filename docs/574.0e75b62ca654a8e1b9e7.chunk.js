"use strict";(self.webpackChunkjson_utils=self.webpackChunkjson_utils||[]).push([[574],{523:(t,e,s)=>{s.d(e,{FormatConverter:()=>r});var n=s(472),i=s(695);class r{constructor(){this.parsedData=null,this.initializeElements(),this.initializeEditors(),this.attachEventListeners()}initializeElements(){this.elements={clearBtn:this.getElementById("clearBtn"),loadSampleBtn:this.getElementById("loadSampleBtn"),inputFormat:this.getElementById("inputFormat"),outputFormat:this.getElementById("outputFormat"),copyToInputBtn:this.getElementById("copyToInputBtn"),copyBtn:this.getElementById("copyBtn"),downloadBtn:this.getElementById("downloadBtn"),inputStatus:this.getElementById("inputStatus"),outputStatus:this.getElementById("outputStatus")}}getElementById(t){const e=document.getElementById(t);if(!e)throw new Error(`Element with id "${t}" not found`);return e}initializeEditors(){const t=i.i.initializeEditor("jsonInput",{mode:"application/json",readOnly:!1});if(!t)throw new Error("Failed to initialize input editor");this.inputEditor=t,this.inputEditor.setOption("readOnly",!1);const e=i.i.initializeEditor("output",{mode:"text/x-yaml",readOnly:!0});if(!e)throw new Error("Failed to initialize output editor");this.outputEditor=e}attachEventListeners(){this.elements.clearBtn.addEventListener("click",()=>this.clearInput()),this.elements.loadSampleBtn.addEventListener("click",()=>this.loadSample()),this.elements.copyToInputBtn.addEventListener("click",()=>this.copyToInput()),this.elements.copyBtn.addEventListener("click",()=>this.copyOutput()),this.elements.downloadBtn.addEventListener("click",()=>this.downloadOutput()),this.elements.inputFormat.addEventListener("change",()=>{this.updateInputMode(),this.autoConvert()}),this.elements.outputFormat.addEventListener("change",()=>{this.updateOutputMode(),this.autoConvert()}),this.inputEditor.on("change",()=>{this.debounce(()=>this.autoConvert(),800)()}),this.elements.inputStatus.addEventListener("click",t=>{this.elements.inputStatus.classList.contains("error")&&(t.stopPropagation(),this.toggleErrorExpansion(this.elements.inputStatus))})}updateInputMode(){const t=this.elements.inputFormat.value;this.inputEditor.setOption("mode",{json:"application/json",xml:"application/xml",yaml:"text/x-yaml",csv:"text/plain"}[t])}updateOutputMode(){const t=this.elements.outputFormat.value;this.outputEditor.setOption("mode",{json:"application/json",xml:"application/xml",yaml:"text/x-yaml",csv:"text/plain"}[t])}debounce(t,e){let s;return(...n)=>{clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),t(...n)},e)}}clearInput(){this.inputEditor.setValue(""),this.outputEditor.setValue(""),this.clearStatus(),this.parsedData=null}loadSample(){const t=JSON.stringify({name:"John Doe",age:30,city:"New York",hobbies:["reading","swimming","coding"],address:{street:"123 Main St",zipCode:"10001"}},null,2);this.inputEditor.setValue(t),this.elements.inputFormat.value="json",this.updateInputMode()}autoConvert(){if(!this.inputEditor.getValue().trim())return this.outputEditor.setValue(""),void this.clearStatus();this.convert()}convert(){const t=this.inputEditor.getValue().trim();if(!t)return void this.showStatus(this.elements.outputStatus,"Please enter data first","error");const e=this.elements.inputFormat.value,s=this.elements.outputFormat.value;try{this.parsedData=this.parseInput(t,e),this.showStatus(this.elements.inputStatus,`${e.toUpperCase()} parsed successfully`,"success");const n=this.formatOutput(this.parsedData,s);this.displayOutput(n),this.showStatus(this.elements.outputStatus,`Converted to ${s.toUpperCase()} successfully`,"success")}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.showStatus(this.elements.inputStatus,`Error: ${e}`,"error"),this.parsedData=null}}parseInput(t,e){switch(e){case"json":return this.parseJSON(t);case"xml":return this.parseXML(t);case"yaml":return this.parseYAML(t);case"csv":return this.parseCSV(t);default:throw new Error(`Unsupported input format: ${e}`)}}parseJSON(t){try{return JSON.parse(t)}catch(e){const s=(0,n.m)(t);return JSON.parse(s)}}parseXML(t){const e=(new DOMParser).parseFromString(t,"text/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("Invalid XML");return this.xmlToJson(e.documentElement)}xmlToJson(t){const e={};if(t.attributes.length>0){e["@attributes"]={};for(let s=0;s<t.attributes.length;s++){const n=t.attributes[s];e["@attributes"][n.nodeName]=n.nodeValue}}if(t.hasChildNodes())for(let s=0;s<t.childNodes.length;s++){const n=t.childNodes[s],i=n.nodeName;if(3===n.nodeType){const t=n.nodeValue?.trim();if(t)return t}else 1===n.nodeType&&(void 0===e[i]?e[i]=this.xmlToJson(n):(Array.isArray(e[i])||(e[i]=[e[i]]),e[i].push(this.xmlToJson(n))))}return e}parseYAML(t){const e=t.split("\n"),s={},n=[s],i=[0];for(const t of e){if(""===t.trim()||t.trim().startsWith("#"))continue;const e=t.search(/\S/),s=t.trim();if(s.startsWith("- ")){const t=s.substring(2).trim(),e=n[n.length-1];if(!Array.isArray(e))throw new Error("Invalid YAML: list item without array context");if(t.includes(":")){const s={},[n,i]=t.split(":").map(t=>t.trim());s[n]=this.parseYAMLValue(i),e.push(s)}else e.push(this.parseYAMLValue(t));continue}if(s.includes(":")){const[t,...r]=s.split(":"),o=r.join(":").trim();for(;e<i[i.length-1]&&n.length>1;)n.pop(),i.pop();const a=n[n.length-1];""===o||"[]"===o||"{}"===o?(a[t.trim()]="[]"===o?[]:{},n.push(a[t.trim()]),i.push(e)):a[t.trim()]=this.parseYAMLValue(o)}}return s}parseYAMLValue(t){return"null"===t?null:"true"===t||"false"!==t&&(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):isNaN(Number(t))?t:Number(t))}parseCSV(t){const e=t.trim().split("\n");if(0===e.length)throw new Error("Empty CSV");const s=this.parseCSVLine(e[0]),n=[];for(let t=1;t<e.length;t++){const i=this.parseCSVLine(e[t]),r={};for(let t=0;t<s.length;t++)r[s[t]]=i[t]||"";n.push(r)}return n}parseCSVLine(t){const e=[];let s="",n=!1;for(let i=0;i<t.length;i++){const r=t[i];'"'===r?n&&'"'===t[i+1]?(s+='"',i++):n=!n:","!==r||n?s+=r:(e.push(s.trim()),s="")}return e.push(s.trim()),e}formatOutput(t,e){switch(e){case"json":return JSON.stringify(t,null,2);case"xml":return this.jsonToXML(t);case"yaml":return this.jsonToYAML(t);case"csv":return this.jsonToCSV(t);default:throw new Error(`Unsupported output format: ${e}`)}}jsonToYAML(t,e=0){const s="  ".repeat(e);if(null===t)return"null";if("boolean"==typeof t)return t.toString();if("number"==typeof t)return t.toString();if("string"==typeof t)return t.includes("\n")||t.includes(":")||t.includes("#")||t.includes("[")||t.includes("]")?`"${t.replace(/"/g,'\\"')}"`:t;if(Array.isArray(t))return 0===t.length?"[]":t.map(t=>`${s}- ${this.jsonToYAML(t,e+1).replace(/^\s+/,"")}`).join("\n");if("object"==typeof t){const n=Object.keys(t);return 0===n.length?"{}":n.map(n=>{const i=t[n],r=this.jsonToYAML(i,e+1);return"object"!=typeof i||null===i||Array.isArray(i)?Array.isArray(i)&&i.length>0?`${s}${n}:\n${r}`:`${s}${n}: ${r}`:`${s}${n}:\n${r}`}).join("\n")}return t.toString()}jsonToXML(t,e="root",s=0){if(0===s)return`<?xml version="1.0" encoding="UTF-8"?>\n<${e}>\n${this.jsonToXML(t,e,1)}\n</${e}>`;const n="  ".repeat(s);return null===t?`${n}<null/>`:"boolean"==typeof t?`${n}<boolean>${t}</boolean>`:"number"==typeof t?`${n}<number>${t}</number>`:"string"==typeof t?`${n}<string>${this.escapeXML(t)}</string>`:Array.isArray(t)?t.map((t,e)=>`${n}<item index="${e}">\n${this.jsonToXML(t,"item",s+1)}\n${n}</item>`).join("\n"):"object"==typeof t?Object.keys(t).map(e=>{const i=t[e],r=e.replace(/[^a-zA-Z0-9_-]/g,"_");return"object"==typeof i&&null!==i?`${n}<${r}>\n${this.jsonToXML(i,r,s+1)}\n${n}</${r}>`:`${n}<${r}>${this.escapeXML(String(i))}</${r}>`}).join("\n"):`${n}<value>${this.escapeXML(String(t))}</value>`}escapeXML(t){return t.replace(/[<>&'"]/g,t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}})}jsonToCSV(t){if(!Array.isArray(t))throw new Error("CSV output requires an array of objects");if(0===t.length)return"";const e=new Set;t.forEach(t=>{"object"==typeof t&&null!==t&&Object.keys(t).forEach(t=>e.add(t))});const s=Array.from(e);return[s.map(t=>this.escapeCSV(t)).join(","),...t.map(t=>s.map(e=>{const s=t[e];return null==s?"":"object"==typeof s?this.escapeCSV(JSON.stringify(s)):this.escapeCSV(String(s))}).join(","))].join("\n")}escapeCSV(t){return t.includes(",")||t.includes('"')||t.includes("\n")?`"${t.replace(/"/g,'""')}"`:t}copyToInput(){const t=this.outputEditor.getValue();if(!t)return void this.showStatus(this.elements.outputStatus,"No output to copy","error");this.inputEditor.setValue(t);const e=this.elements.outputFormat.value;this.elements.inputFormat.value=e,this.updateInputMode(),this.showStatus(this.elements.outputStatus,"Output copied to input!","success")}async copyOutput(){const t=this.outputEditor.getValue();if(t)try{await navigator.clipboard.writeText(t),this.showStatus(this.elements.outputStatus,"Output copied to clipboard!","success")}catch(e){const s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),this.showStatus(this.elements.outputStatus,"Output copied to clipboard!","success")}else this.showStatus(this.elements.outputStatus,"No output to copy","error")}downloadOutput(){const t=this.outputEditor.getValue();if(!t)return void this.showStatus(this.elements.outputStatus,"No output to download","error");const e=`output.${this.elements.outputFormat.value}`,s=new Blob([t],{type:"text/plain"}),n=URL.createObjectURL(s),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),this.showStatus(this.elements.outputStatus,`File downloaded as ${e}`,"success")}showStatus(t,e,s){t.innerHTML="",t.className=`status-inline ${s}`,"error"===s&&t.classList.add("collapsed");const n=document.createElement("span");n.className="error-content",n.textContent=e,t.appendChild(n)}toggleErrorExpansion(t){t.classList.contains("collapsed")?(t.classList.remove("collapsed"),t.classList.add("expanded")):t.classList.contains("expanded")&&(t.classList.remove("expanded"),t.classList.add("collapsed"))}clearStatus(){this.elements.inputStatus.textContent="",this.elements.inputStatus.className="status-inline",this.elements.outputStatus.textContent="",this.elements.outputStatus.className="status-inline"}displayOutput(t){this.outputEditor.setValue(t)}}},695:(t,e,s)=>{s.d(e,{i:()=>i});var n=s(237);s(792),s(923),s(948),s(274),s(795),s(402),s(347),s(974);class i{static initializeEditor(t,e={}){const s=document.getElementById(t);if(!s)return console.error(`Textarea with id "${t}" not found`),null;if(s.CodeMirror){console.warn(`CodeMirror already initialized on textarea "${t}", returning existing instance`);const e=s.CodeMirror;return this.instances.set(t,e),e}const i=this.instances.get(t);if(i)return console.warn(`CodeMirror instance already exists for "${t}", returning existing instance`),i;try{const i={mode:"application/json",theme:"material-darker",lineNumbers:!0,lineWrapping:!0,readOnly:!1,indentUnit:2,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,extraKeys:{"Ctrl-Q":t=>t.foldCode(t.getCursor()),"Cmd-Q":t=>t.foldCode(t.getCursor())},...e},r=n.fromTextArea(s,i);return this.instances.set(t,r),r}catch(e){return console.error(`Failed to initialize CodeMirror on textarea "${t}":`,e),null}}static getInstance(t){return this.instances.get(t)||null}static cleanup(t){const e=this.instances.get(t);if(e)try{e.toTextArea(),this.instances.delete(t)}catch(e){console.error(`Error cleaning up CodeMirror instance for "${t}":`,e)}}static cleanupAll(){for(const[t]of this.instances)this.cleanup(t)}static hasInstance(t){const e=document.getElementById(t);return!(!e||!e.CodeMirror)||this.instances.has(t)}}i.instances=new Map}}]);