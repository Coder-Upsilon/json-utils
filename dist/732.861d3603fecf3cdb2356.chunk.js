"use strict";(self.webpackChunkjson_utils=self.webpackChunkjson_utils||[]).push([[732],{137:(t,e,n)=>{n.d(e,{d5:()=>r,qe:()=>i});class i{constructor(t){this.debounceTimer=null,this.isEnabled=!0,this.syncEnabledListener=null,this.config={autoSave:!0,debounceMs:500,...t},this.isEnabled=this.checkLocalStorageAvailable()}getActualKey(){return this.config.key,s}checkLocalStorageAvailable(){try{const t="__localStorage_test__";return localStorage.setItem(t,"test"),localStorage.removeItem(t),!0}catch(t){return console.warn("localStorage is not available:",t),!1}}save(t){this.isEnabled&&this.config.autoSave&&o()&&(this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.saveImmediate(t)},this.config.debounceMs))}saveImmediate(t){if(this.isEnabled&&o())try{const e={content:t,timestamp:Date.now()};localStorage.setItem(this.getActualKey(),JSON.stringify(e))}catch(t){console.error("Failed to save to localStorage:",t)}}load(){if(!this.isEnabled)return null;try{const t=localStorage.getItem(this.getActualKey());if(!t)return null;const e=JSON.parse(t),n=6048e5;return e.timestamp&&Date.now()-e.timestamp>n?(this.clear(),null):e.content||null}catch(t){return console.error("Failed to load from localStorage:",t),null}}clear(){if(this.isEnabled)try{localStorage.removeItem(this.getActualKey())}catch(t){console.error("Failed to clear localStorage:",t)}}hasSavedContent(){if(!this.isEnabled)return!1;try{const t=localStorage.getItem(this.getActualKey());return null!==t&&t.length>0}catch(t){return!1}}getContentAge(){if(!this.isEnabled)return null;try{const t=localStorage.getItem(this.getActualKey());if(!t)return null;const e=JSON.parse(t);return e.timestamp?Date.now()-e.timestamp:null}catch(t){return null}}setAutoSave(t){this.config.autoSave=t}cleanup(){this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),this.syncEnabledListener&&(window.removeEventListener("syncEnabled",this.syncEnabledListener),this.syncEnabledListener=null)}setupSyncEnabledListener(t){this.syncEnabledListener&&window.removeEventListener("syncEnabled",this.syncEnabledListener),this.syncEnabledListener=()=>{const e=t();e&&e.trim()&&this.saveImmediate(e)},window.addEventListener("syncEnabled",this.syncEnabledListener)}}const s="json_utils_shared_input",r={JSON_FORMATTER:"JSON_FORMATTER",JSON_FILTER:"JSON_FILTER",FORMAT_CONVERTER:"FORMAT_CONVERTER",SCHEMA_DETECTOR:"SCHEMA_DETECTOR"};function o(){try{const t=localStorage.getItem("json_utils_share_across_pages");return null===t||"true"===t}catch(t){return!0}}},239:(t,e,n)=>{n.d(e,{JSONPathFilter:()=>o});var i=n(615),s=n(695),r=n(137);class o{constructor(){this.storageManager=new r.qe({key:r.d5.JSON_FILTER,autoSave:!0,debounceMs:500}),this.initializeElements(),this.initializeEditors(),this.attachEventListeners(),this.loadSavedContent(),this.storageManager.setupSyncEnabledListener(()=>this.inputEditor.getValue())}initializeElements(){this.jsonPathInput=document.getElementById("jsonpath-input"),this.resultCount=document.getElementById("result-count"),this.resultType=document.getElementById("result-type")}initializeEditors(){const t=s.i.initializeEditor("jsonFilterInput",{mode:"application/json",readOnly:!1});if(!t)throw new Error("Failed to initialize input editor");this.inputEditor=t,this.inputEditor.on("change",()=>{const t=this.inputEditor.getValue();this.storageManager.save(t)});const e=s.i.initializeEditor("jsonFilterOutput",{mode:"application/json",readOnly:!0});if(!e)throw new Error("Failed to initialize output editor");this.outputEditor=e}attachEventListeners(){const t=document.getElementById("filterBtn"),e=document.getElementById("clearFilterBtn"),n=document.getElementById("clearFilterInputBtn"),i=document.getElementById("loadFilterSampleBtn"),s=document.getElementById("copyFilterBtn"),r=document.getElementById("downloadFilterBtn"),o=document.getElementById("toggle-help");t&&t.addEventListener("click",()=>this.filterJSON()),e&&e.addEventListener("click",()=>this.clearAll()),n&&n.addEventListener("click",()=>this.clearInput()),i&&i.addEventListener("click",()=>this.loadExample()),s&&s.addEventListener("click",()=>this.copyResult()),r&&r.addEventListener("click",()=>this.downloadResult()),o&&o.addEventListener("click",()=>this.closeDrawer());const a=document.getElementById("drawer-trigger");a&&a.addEventListener("click",()=>this.openDrawer()),document.querySelectorAll(".example-item").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-expression");e&&this.jsonPathInput&&(this.jsonPathInput.value=e,this.filterJSON())})}),this.jsonPathInput&&this.jsonPathInput.addEventListener("input",()=>{this.debounce(()=>this.filterJSON(),300)()}),this.setupDynamicHeight()}debounce(t,e){let n;return(...i)=>{clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...i)},e)}}filterJSON(){const t=this.inputEditor?.getValue().trim(),e=this.jsonPathInput?.value.trim();if(t&&e)try{const n=JSON.parse(t),s=i.query(n,e);this.displayResults(s),this.updateResultInfo(s)}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.displayError(`Error: ${e}`)}else this.clearResults()}displayResults(t){if(!this.outputEditor)return;if(0===t.length)return void this.outputEditor.setValue("No matches found");let e;e=1===t.length?JSON.stringify(t[0],null,2):JSON.stringify(t,null,2),this.outputEditor.setValue(e)}displayError(t){this.outputEditor&&this.outputEditor.setValue(t),this.clearResultInfo()}updateResultInfo(t){if(this.resultCount&&(this.resultCount.textContent=`Found ${t.length} result${1!==t.length?"s":""}`),this.resultType&&t.length>0){const e=t[0],n=Array.isArray(e)?"Array":typeof e;this.resultType.textContent=`Type: ${n}`}}clearResultInfo(){this.resultCount&&(this.resultCount.textContent=""),this.resultType&&(this.resultType.textContent="")}clearResults(){this.outputEditor&&this.outputEditor.setValue(""),this.clearResultInfo()}clearInput(){this.inputEditor&&(this.inputEditor.setValue(""),this.storageManager.clear())}clearAll(){this.inputEditor&&this.inputEditor.setValue(""),this.jsonPathInput&&(this.jsonPathInput.value=""),this.clearResults()}loadExample(){this.inputEditor&&this.inputEditor.setValue(JSON.stringify({store:{book:[{category:"reference",author:"Nigel Rees",title:"Sayings of the Century",price:8.95},{category:"fiction",author:"Evelyn Waugh",title:"Sword of Honour",price:12.99},{category:"fiction",author:"Herman Melville",title:"Moby Dick",isbn:"0-553-21311-3",price:8.99},{category:"fiction",author:"J. R. R. Tolkien",title:"The Lord of the Rings",isbn:"0-395-19395-8",price:22.99}],bicycle:{color:"red",price:19.95}}},null,2)),this.jsonPathInput&&(this.jsonPathInput.value="$.store.book[*].title"),this.filterJSON()}async copyResult(){const t=this.outputEditor?.getValue();if(t)try{await navigator.clipboard.writeText(t),alert("Result copied to clipboard!")}catch(e){const n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),alert("Result copied to clipboard!")}else alert("No result to copy")}downloadResult(){const t=this.outputEditor?.getValue();if(!t)return void alert("No result to download");const e=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download="jsonpath-result.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}openDrawer(){const t=document.querySelector(".help-panel"),e=document.querySelector(".jsonpath-layout"),n=document.getElementById("drawer-trigger");t&&(t.classList.contains("open")?(t.classList.remove("open"),t.classList.add("hidden"),e&&e.classList.remove("drawer-open"),n&&(n.style.display="flex")):(t.classList.remove("hidden"),t.classList.add("open"),e&&e.classList.add("drawer-open"),n&&(n.style.display="none")))}closeDrawer(){const t=document.querySelector(".help-panel"),e=document.querySelector(".jsonpath-layout"),n=document.getElementById("drawer-trigger");t&&(t.classList.remove("open"),t.classList.add("hidden"),e&&e.classList.remove("drawer-open"),n&&(n.style.display="flex"))}toggleHelpPanel(){const t=document.querySelector(".help-panel"),e=document.querySelector(".jsonpath-layout");t&&e&&(t.classList.contains("hidden")?(t.classList.remove("hidden"),e.style.gridTemplateColumns="2fr 1fr"):(t.classList.add("hidden"),e.style.gridTemplateColumns="1fr"))}setupDynamicHeight(){if(!this.inputEditor)return;const t=this.inputEditor.getWrapperElement();t&&(this.inputEditor.on("focus",()=>{t.classList.add("cm-input-focused"),setTimeout(()=>{this.inputEditor.refresh()},350)}),this.inputEditor.on("blur",()=>{t.classList.remove("cm-input-focused"),setTimeout(()=>{this.inputEditor.refresh()},350)}))}loadSavedContent(){const t=this.storageManager.load();t&&t.trim()&&(this.inputEditor.setValue(t),this.jsonPathInput&&this.jsonPathInput.value.trim()&&this.filterJSON())}}},695:(t,e,n)=>{n.d(e,{i:()=>s});var i=n(237);n(792),n(923),n(948),n(274),n(795),n(895),n(653),n(820),n(700),n(685),n(527),n(4),n(402),n(347),n(974),n(873),n(443);class s{static initializeEditor(t,e={}){const n=document.getElementById(t);if(!n)return console.error(`Textarea with id "${t}" not found`),null;if(n.CodeMirror){console.warn(`CodeMirror already initialized on textarea "${t}", returning existing instance`);const e=n.CodeMirror;return this.instances.set(t,e),e}const s=this.instances.get(t);if(s)return console.warn(`CodeMirror instance already exists for "${t}", returning existing instance`),s;try{const s={mode:"application/json",theme:"material-darker",lineNumbers:!0,lineWrapping:!0,readOnly:!1,indentUnit:2,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0,minChars:2},extraKeys:{"Ctrl-Q":t=>t.foldCode(t.getCursor()),"Cmd-Q":t=>t.foldCode(t.getCursor()),"Alt-G":"jumpToLine"},...e},r=i.fromTextArea(n,s);return this.instances.set(t,r),r}catch(e){return console.error(`Failed to initialize CodeMirror on textarea "${t}":`,e),null}}static getInstance(t){return this.instances.get(t)||null}static cleanup(t){const e=this.instances.get(t);if(e)try{e.toTextArea(),this.instances.delete(t)}catch(e){console.error(`Error cleaning up CodeMirror instance for "${t}":`,e)}}static cleanupAll(){for(const[t]of this.instances)this.cleanup(t)}static hasInstance(t){const e=document.getElementById(t);return!(!e||!e.CodeMirror)||this.instances.has(t)}}s.instances=new Map}}]);