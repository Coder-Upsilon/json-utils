"use strict";(self.webpackChunkjson_utils=self.webpackChunkjson_utils||[]).push([[648],{137:(t,e,n)=>{n.d(e,{d5:()=>r,qe:()=>s});class s{constructor(t){this.debounceTimer=null,this.isEnabled=!0,this.syncEnabledListener=null,this.config={autoSave:!0,debounceMs:500,...t},this.isEnabled=this.checkLocalStorageAvailable()}getActualKey(){return this.config.key,o}checkLocalStorageAvailable(){try{const t="__localStorage_test__";return localStorage.setItem(t,"test"),localStorage.removeItem(t),!0}catch(t){return console.warn("localStorage is not available:",t),!1}}save(t){this.isEnabled&&this.config.autoSave&&i()&&(this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.saveImmediate(t)},this.config.debounceMs))}saveImmediate(t){if(this.isEnabled&&i())try{const e={content:t,timestamp:Date.now()};localStorage.setItem(this.getActualKey(),JSON.stringify(e))}catch(t){console.error("Failed to save to localStorage:",t)}}load(){if(!this.isEnabled)return null;try{const t=localStorage.getItem(this.getActualKey());if(!t)return null;const e=JSON.parse(t),n=6048e5;return e.timestamp&&Date.now()-e.timestamp>n?(this.clear(),null):e.content||null}catch(t){return console.error("Failed to load from localStorage:",t),null}}clear(){if(this.isEnabled)try{localStorage.removeItem(this.getActualKey())}catch(t){console.error("Failed to clear localStorage:",t)}}hasSavedContent(){if(!this.isEnabled)return!1;try{const t=localStorage.getItem(this.getActualKey());return null!==t&&t.length>0}catch(t){return!1}}getContentAge(){if(!this.isEnabled)return null;try{const t=localStorage.getItem(this.getActualKey());if(!t)return null;const e=JSON.parse(t);return e.timestamp?Date.now()-e.timestamp:null}catch(t){return null}}setAutoSave(t){this.config.autoSave=t}cleanup(){this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),this.syncEnabledListener&&(window.removeEventListener("syncEnabled",this.syncEnabledListener),this.syncEnabledListener=null)}setupSyncEnabledListener(t){this.syncEnabledListener&&window.removeEventListener("syncEnabled",this.syncEnabledListener),this.syncEnabledListener=()=>{const e=t();e&&e.trim()&&this.saveImmediate(e)},window.addEventListener("syncEnabled",this.syncEnabledListener)}}const o="json_utils_shared_input",r={JSON_FORMATTER:"JSON_FORMATTER",JSON_FILTER:"JSON_FILTER",FORMAT_CONVERTER:"FORMAT_CONVERTER",SCHEMA_DETECTOR:"SCHEMA_DETECTOR"};function i(){try{const t=localStorage.getItem("json_utils_share_across_pages");return null===t||"true"===t}catch(t){return!0}}},306:(t,e,n)=>{var s,o;n.d(e,{MH:()=>m,Mh:()=>h,NA:()=>d,Oz:()=>p,Ur:()=>o,VV:()=>u,aB:()=>c,nO:()=>l,pp:()=>a}),function(t){t.JSON_OPERATIONS="json_operations",t.FORMAT_CONVERSION="format_conversion",t.JSONPATH_FILTER="jsonpath_filter",t.SCHEMA_DETECTION="schema_detection",t.USER_INTERACTION="user_interaction",t.NAVIGATION="navigation",t.ERROR="error"}(s||(s={})),function(t){t.FORMAT_JSON="format_json",t.MINIFY_JSON="minify_json",t.STRINGIFY_JSON="stringify_json",t.PARSE_STRING="parse_string",t.REPAIR_JSON="repair_json",t.CLEAR_INPUT="clear_input",t.LOAD_SAMPLE="load_sample",t.COPY_OUTPUT="copy_output",t.DOWNLOAD_OUTPUT="download_output",t.COPY_TO_INPUT="copy_to_input",t.CONVERT_TO_YAML="convert_to_yaml",t.CONVERT_TO_XML="convert_to_xml",t.CONVERT_TO_CSV="convert_to_csv",t.CONVERT_FROM_YAML="convert_from_yaml",t.CONVERT_FROM_XML="convert_from_xml",t.CONVERT_FROM_CSV="convert_from_csv",t.FILTER_JSON="filter_json",t.JSONPATH_QUERY="jsonpath_query",t.LOAD_JSONPATH_EXAMPLE="load_jsonpath_example",t.TOGGLE_HELP_PANEL="toggle_help_panel",t.INFER_SCHEMA="infer_schema",t.SCHEMA_FORMAT_CHANGE="schema_format_change",t.BUTTON_CLICK="button_click",t.TOGGLE_SETTING="toggle_setting",t.LANGUAGE_CHANGE="language_change",t.SHARE_TOGGLE="share_toggle",t.PAGE_VIEW="page_view",t.EXTERNAL_LINK_CLICK="external_link_click",t.JSON_PARSE_ERROR="json_parse_error",t.CONVERSION_ERROR="conversion_error",t.JSONPATH_ERROR="jsonpath_error"}(o||(o={}));class r{constructor(){this.isEnabled=!0,this.isEnabled="undefined"!=typeof window&&"function"==typeof window.gtag}static getInstance(){return r.instance||(r.instance=new r),r.instance}trackEvent(t,e,n){if(this.isEnabled)try{const s={event_category:e,...n};window.gtag("event",t,s),console.debug("[Analytics] Event tracked:",t,s)}catch(t){console.error("[Analytics] Failed to track event:",t)}else console.debug("[Analytics] Not enabled, skipping event:",t)}trackJsonOperation(t,e,n=!0){this.trackEvent(t,s.JSON_OPERATIONS,{input_size:e,success:n})}trackFormatConversion(t,e,n=!0,o){const r=`convert_${t}_to_${e}`;this.trackEvent(r,s.FORMAT_CONVERSION,{from_format:t,to_format:e,success:n,input_size:o})}trackJsonPathQuery(t,e,n=!0){this.trackEvent(o.JSONPATH_QUERY,s.JSONPATH_FILTER,{query_length:t.length,result_count:e,success:n})}trackSchemaInference(t,e,n=!0){this.trackEvent(o.INFER_SCHEMA,s.SCHEMA_DETECTION,{schema_format:t,input_size:e,success:n})}trackButtonClick(t,e){this.trackEvent(o.BUTTON_CLICK,s.USER_INTERACTION,{button_id:t,button_label:e})}trackError(t,e,n){this.trackEvent(t,s.ERROR,{error_message:e.substring(0,100),context:n})}trackExternalLink(t){this.trackEvent(o.EXTERNAL_LINK_CLICK,s.NAVIGATION,{link_url:t})}trackCopy(t,e){this.trackEvent(o.COPY_OUTPUT,s.USER_INTERACTION,{content_type:t,content_size:e})}trackDownload(t,e){this.trackEvent(o.DOWNLOAD_OUTPUT,s.USER_INTERACTION,{file_type:t,file_size:e})}}const i=r.getInstance();function a(t,e,n=!0){i.trackJsonOperation(t,e,n)}function l(t,e,n=!0,s){i.trackFormatConversion(t,e,n,s)}function u(t,e,n=!0){i.trackJsonPathQuery(t,e,n)}function c(t,e,n=!0){i.trackSchemaInference(t,e,n)}function h(t,e){i.trackButtonClick(t,e)}function p(t,e,n){i.trackError(t,e,n)}function d(t,e){i.trackCopy(t,e)}function m(t,e){i.trackDownload(t,e)}},523:(t,e,n)=>{n.d(e,{FormatConverter:()=>a});var s=n(472),o=n(695),r=n(137),i=n(306);class a{constructor(){this.parsedData=null,this.storageManager=new r.qe({key:r.d5.FORMAT_CONVERTER,autoSave:!0,debounceMs:500}),this.initializeElements(),this.initializeEditors(),this.attachEventListeners(),this.loadSavedContent(),this.storageManager.setupSyncEnabledListener(()=>this.inputEditor.getValue())}initializeElements(){this.elements={clearBtn:this.getElementById("clearBtn"),loadSampleBtn:this.getElementById("loadSampleBtn"),inputFormat:this.getElementById("inputFormat"),outputFormat:this.getElementById("outputFormat"),copyToInputBtn:this.getElementById("copyToInputBtn"),copyBtn:this.getElementById("copyBtn"),downloadBtn:this.getElementById("downloadBtn"),inputStatus:this.getElementById("inputStatus"),outputStatus:this.getElementById("outputStatus")}}getElementById(t){const e=document.getElementById(t);if(!e)throw new Error(`Element with id "${t}" not found`);return e}initializeEditors(){const t=o.i.initializeEditor("jsonInput",{mode:"application/json",readOnly:!1});if(!t)throw new Error("Failed to initialize input editor");this.inputEditor=t,this.inputEditor.setOption("readOnly",!1),this.inputEditor.on("change",()=>{const t=this.inputEditor.getValue();this.storageManager.save(t)});const e=o.i.initializeEditor("output",{mode:"text/x-yaml",readOnly:!0});if(!e)throw new Error("Failed to initialize output editor");this.outputEditor=e}attachEventListeners(){this.elements.clearBtn.addEventListener("click",()=>this.clearInput()),this.elements.loadSampleBtn.addEventListener("click",()=>this.loadSample()),this.elements.copyToInputBtn.addEventListener("click",()=>this.copyToInput()),this.elements.copyBtn.addEventListener("click",()=>this.copyOutput()),this.elements.downloadBtn.addEventListener("click",()=>this.downloadOutput()),this.elements.inputFormat.addEventListener("change",()=>{this.updateInputMode(),this.autoConvert()}),this.elements.outputFormat.addEventListener("change",()=>{this.updateOutputMode(),this.autoConvert()}),this.inputEditor.on("change",()=>{this.debounce(()=>this.autoConvert(),800)()}),this.elements.inputStatus.addEventListener("click",t=>{this.elements.inputStatus.classList.contains("error")&&(t.stopPropagation(),this.toggleErrorExpansion(this.elements.inputStatus))})}updateInputMode(){const t=this.elements.inputFormat.value;this.inputEditor.setOption("mode",{json:"application/json",xml:"application/xml",yaml:"text/x-yaml",csv:"text/plain"}[t])}updateOutputMode(){const t=this.elements.outputFormat.value;this.outputEditor.setOption("mode",{json:"application/json",xml:"application/xml",yaml:"text/x-yaml",csv:"text/plain"}[t])}debounce(t,e){let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...s)},e)}}clearInput(){this.inputEditor.setValue(""),this.outputEditor.setValue(""),this.storageManager.clear(),this.clearStatus(),this.parsedData=null}loadSample(){(0,i.Mh)("loadSampleBtn","Load Sample");const t=JSON.stringify({name:"John Doe",age:30,city:"New York",hobbies:["reading","swimming","coding"],address:{street:"123 Main St",zipCode:"10001"}},null,2);this.inputEditor.setValue(t),this.elements.inputFormat.value="json",this.updateInputMode()}autoConvert(){if(!this.inputEditor.getValue().trim())return this.outputEditor.setValue(""),void this.clearStatus();this.convert()}convert(){const t=this.inputEditor.getValue().trim();if(!t)return void this.showStatus(this.elements.outputStatus,"Please enter data first","error");const e=this.elements.inputFormat.value,n=this.elements.outputFormat.value;try{this.parsedData=this.parseInput(t,e),this.showStatus(this.elements.inputStatus,`${e.toUpperCase()} parsed successfully`,"success");const s=this.formatOutput(this.parsedData,n);this.displayOutput(s),this.showStatus(this.elements.outputStatus,`Converted to ${n.toUpperCase()} successfully`,"success"),(0,i.nO)(e,n,!0,t.length)}catch(t){const s=t instanceof Error?t.message:"Unknown error";this.showStatus(this.elements.inputStatus,`Error: ${s}`,"error"),this.parsedData=null,(0,i.Oz)(i.Ur.CONVERSION_ERROR,s,`${e}_to_${n}`)}}parseInput(t,e){switch(e){case"json":return this.parseJSON(t);case"xml":return this.parseXML(t);case"yaml":return this.parseYAML(t);case"csv":return this.parseCSV(t);default:throw new Error(`Unsupported input format: ${e}`)}}parseJSON(t){try{return JSON.parse(t)}catch(e){const n=(0,s.m)(t);return JSON.parse(n)}}parseXML(t){const e=(new DOMParser).parseFromString(t,"text/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("Invalid XML");return this.xmlToJson(e.documentElement)}xmlToJson(t){const e={};if(t.attributes.length>0){e["@attributes"]={};for(let n=0;n<t.attributes.length;n++){const s=t.attributes[n];e["@attributes"][s.nodeName]=s.nodeValue}}if(t.hasChildNodes())for(let n=0;n<t.childNodes.length;n++){const s=t.childNodes[n],o=s.nodeName;if(3===s.nodeType){const t=s.nodeValue?.trim();if(t)return t}else 1===s.nodeType&&(void 0===e[o]?e[o]=this.xmlToJson(s):(Array.isArray(e[o])||(e[o]=[e[o]]),e[o].push(this.xmlToJson(s))))}return e}parseYAML(t){const e=t.split("\n"),n={},s=[n],o=[0];for(const t of e){if(""===t.trim()||t.trim().startsWith("#"))continue;const e=t.search(/\S/),n=t.trim();if(n.startsWith("- ")){const t=n.substring(2).trim(),e=s[s.length-1];if(!Array.isArray(e))throw new Error("Invalid YAML: list item without array context");if(t.includes(":")){const n={},[s,o]=t.split(":").map(t=>t.trim());n[s]=this.parseYAMLValue(o),e.push(n)}else e.push(this.parseYAMLValue(t));continue}if(n.includes(":")){const[t,...r]=n.split(":"),i=r.join(":").trim();for(;e<o[o.length-1]&&s.length>1;)s.pop(),o.pop();const a=s[s.length-1];""===i||"[]"===i||"{}"===i?(a[t.trim()]="[]"===i?[]:{},s.push(a[t.trim()]),o.push(e)):a[t.trim()]=this.parseYAMLValue(i)}}return n}parseYAMLValue(t){return"null"===t?null:"true"===t||"false"!==t&&(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):isNaN(Number(t))?t:Number(t))}parseCSV(t){const e=t.trim().split("\n");if(0===e.length)throw new Error("Empty CSV");const n=this.parseCSVLine(e[0]),s=[];for(let t=1;t<e.length;t++){const o=this.parseCSVLine(e[t]),r={};for(let t=0;t<n.length;t++)r[n[t]]=o[t]||"";s.push(r)}return s}parseCSVLine(t){const e=[];let n="",s=!1;for(let o=0;o<t.length;o++){const r=t[o];'"'===r?s&&'"'===t[o+1]?(n+='"',o++):s=!s:","!==r||s?n+=r:(e.push(n.trim()),n="")}return e.push(n.trim()),e}formatOutput(t,e){switch(e){case"json":return JSON.stringify(t,null,2);case"xml":return this.jsonToXML(t);case"yaml":return this.jsonToYAML(t);case"csv":return this.jsonToCSV(t);default:throw new Error(`Unsupported output format: ${e}`)}}jsonToYAML(t,e=0){const n="  ".repeat(e);if(null===t)return"null";if("boolean"==typeof t)return t.toString();if("number"==typeof t)return t.toString();if("string"==typeof t)return t.includes("\n")||t.includes(":")||t.includes("#")||t.includes("[")||t.includes("]")?`"${t.replace(/"/g,'\\"')}"`:t;if(Array.isArray(t))return 0===t.length?"[]":t.map(t=>`${n}- ${this.jsonToYAML(t,e+1).replace(/^\s+/,"")}`).join("\n");if("object"==typeof t){const s=Object.keys(t);return 0===s.length?"{}":s.map(s=>{const o=t[s],r=this.jsonToYAML(o,e+1);return"object"!=typeof o||null===o||Array.isArray(o)?Array.isArray(o)&&o.length>0?`${n}${s}:\n${r}`:`${n}${s}: ${r}`:`${n}${s}:\n${r}`}).join("\n")}return t.toString()}jsonToXML(t,e="root",n=0){if(0===n)return`<?xml version="1.0" encoding="UTF-8"?>\n<${e}>\n${this.jsonToXML(t,e,1)}\n</${e}>`;const s="  ".repeat(n);return null===t?`${s}<null/>`:"boolean"==typeof t?`${s}<boolean>${t}</boolean>`:"number"==typeof t?`${s}<number>${t}</number>`:"string"==typeof t?`${s}<string>${this.escapeXML(t)}</string>`:Array.isArray(t)?t.map((t,e)=>`${s}<item index="${e}">\n${this.jsonToXML(t,"item",n+1)}\n${s}</item>`).join("\n"):"object"==typeof t?Object.keys(t).map(e=>{const o=t[e],r=e.replace(/[^a-zA-Z0-9_-]/g,"_");return"object"==typeof o&&null!==o?`${s}<${r}>\n${this.jsonToXML(o,r,n+1)}\n${s}</${r}>`:`${s}<${r}>${this.escapeXML(String(o))}</${r}>`}).join("\n"):`${s}<value>${this.escapeXML(String(t))}</value>`}escapeXML(t){return t.replace(/[<>&'"]/g,t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}})}jsonToCSV(t){if(!Array.isArray(t))throw new Error("CSV output requires an array of objects");if(0===t.length)return"";const e=new Set;t.forEach(t=>{"object"==typeof t&&null!==t&&Object.keys(t).forEach(t=>e.add(t))});const n=Array.from(e);return[n.map(t=>this.escapeCSV(t)).join(","),...t.map(t=>n.map(e=>{const n=t[e];return null==n?"":"object"==typeof n?this.escapeCSV(JSON.stringify(n)):this.escapeCSV(String(n))}).join(","))].join("\n")}escapeCSV(t){return t.includes(",")||t.includes('"')||t.includes("\n")?`"${t.replace(/"/g,'""')}"`:t}copyToInput(){const t=this.outputEditor.getValue();if(!t)return void this.showStatus(this.elements.outputStatus,"No output to copy","error");this.inputEditor.setValue(t);const e=this.elements.outputFormat.value;this.elements.inputFormat.value=e,this.updateInputMode(),this.showStatus(this.elements.outputStatus,"Output copied to input!","success")}async copyOutput(){const t=this.outputEditor.getValue();if(t)try{await navigator.clipboard.writeText(t),this.showStatus(this.elements.outputStatus,"Output copied to clipboard!","success"),(0,i.NA)(this.elements.outputFormat.value,t.length)}catch(e){const n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),this.showStatus(this.elements.outputStatus,"Output copied to clipboard!","success"),(0,i.NA)(this.elements.outputFormat.value,t.length)}else this.showStatus(this.elements.outputStatus,"No output to copy","error")}downloadOutput(){const t=this.outputEditor.getValue();if(!t)return void this.showStatus(this.elements.outputStatus,"No output to download","error");const e=this.elements.outputFormat.value,n=`output.${e}`,s=new Blob([t],{type:"text/plain"}),o=URL.createObjectURL(s),r=document.createElement("a");r.href=o,r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o),this.showStatus(this.elements.outputStatus,`File downloaded as ${n}`,"success"),(0,i.MH)(e,t.length)}showStatus(t,e,n){t.innerHTML="",t.className=`status-inline ${n}`,"error"===n&&t.classList.add("collapsed");const s=document.createElement("span");s.className="error-content",s.textContent=e,t.appendChild(s)}toggleErrorExpansion(t){t.classList.contains("collapsed")?(t.classList.remove("collapsed"),t.classList.add("expanded")):t.classList.contains("expanded")&&(t.classList.remove("expanded"),t.classList.add("collapsed"))}clearStatus(){this.elements.inputStatus.textContent="",this.elements.inputStatus.className="status-inline",this.elements.outputStatus.textContent="",this.elements.outputStatus.className="status-inline"}displayOutput(t){this.outputEditor.setValue(t)}loadSavedContent(){const t=this.storageManager.load();t&&t.trim()&&(this.inputEditor.setValue(t),this.autoConvert())}}},695:(t,e,n)=>{n.d(e,{i:()=>o});var s=n(237);n(792),n(923),n(948),n(274),n(795),n(895),n(653),n(820),n(700),n(685),n(527),n(4),n(402),n(347),n(974),n(873),n(443);class o{static initializeEditor(t,e={}){const n=document.getElementById(t);if(!n)return console.error(`Textarea with id "${t}" not found`),null;if(n.CodeMirror){console.warn(`CodeMirror already initialized on textarea "${t}", returning existing instance`);const e=n.CodeMirror;return this.instances.set(t,e),e}const o=this.instances.get(t);if(o)return console.warn(`CodeMirror instance already exists for "${t}", returning existing instance`),o;try{const o={mode:"application/json",theme:"material-darker",lineNumbers:!0,lineWrapping:!0,readOnly:!1,indentUnit:2,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0,minChars:2},extraKeys:{"Ctrl-Q":t=>t.foldCode(t.getCursor()),"Cmd-Q":t=>t.foldCode(t.getCursor()),"Alt-G":"jumpToLine"},...e},r=s.fromTextArea(n,o);return this.instances.set(t,r),r}catch(e){return console.error(`Failed to initialize CodeMirror on textarea "${t}":`,e),null}}static getInstance(t){return this.instances.get(t)||null}static cleanup(t){const e=this.instances.get(t);if(e)try{e.toTextArea(),this.instances.delete(t)}catch(e){console.error(`Error cleaning up CodeMirror instance for "${t}":`,e)}}static cleanupAll(){for(const[t]of this.instances)this.cleanup(t)}static hasInstance(t){const e=document.getElementById(t);return!(!e||!e.CodeMirror)||this.instances.has(t)}}o.instances=new Map}}]);