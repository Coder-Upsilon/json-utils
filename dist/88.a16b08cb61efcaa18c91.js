"use strict";(self.webpackChunkjson_utils=self.webpackChunkjson_utils||[]).push([[88],{137:(e,t,r)=>{r.d(t,{d5:()=>i,qe:()=>n});class n{constructor(e){this.debounceTimer=null,this.isEnabled=!0,this.syncEnabledListener=null,this.config={autoSave:!0,debounceMs:500,...e},this.isEnabled=this.checkLocalStorageAvailable()}getActualKey(){return this.config.key,s}checkLocalStorageAvailable(){try{const e="__localStorage_test__";return localStorage.setItem(e,"test"),localStorage.removeItem(e),!0}catch(e){return console.warn("localStorage is not available:",e),!1}}save(e){this.isEnabled&&this.config.autoSave&&o()&&(this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.saveImmediate(e)},this.config.debounceMs))}saveImmediate(e){if(this.isEnabled&&o())try{const t={content:e,timestamp:Date.now()};localStorage.setItem(this.getActualKey(),JSON.stringify(t))}catch(e){console.error("Failed to save to localStorage:",e)}}load(){if(!this.isEnabled)return null;try{const e=localStorage.getItem(this.getActualKey());if(!e)return null;const t=JSON.parse(e),r=6048e5;return t.timestamp&&Date.now()-t.timestamp>r?(this.clear(),null):t.content||null}catch(e){return console.error("Failed to load from localStorage:",e),null}}clear(){if(this.isEnabled)try{localStorage.removeItem(this.getActualKey())}catch(e){console.error("Failed to clear localStorage:",e)}}hasSavedContent(){if(!this.isEnabled)return!1;try{const e=localStorage.getItem(this.getActualKey());return null!==e&&e.length>0}catch(e){return!1}}getContentAge(){if(!this.isEnabled)return null;try{const e=localStorage.getItem(this.getActualKey());if(!e)return null;const t=JSON.parse(e);return t.timestamp?Date.now()-t.timestamp:null}catch(e){return null}}setAutoSave(e){this.config.autoSave=e}cleanup(){this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),this.syncEnabledListener&&(window.removeEventListener("syncEnabled",this.syncEnabledListener),this.syncEnabledListener=null)}setupSyncEnabledListener(e){this.syncEnabledListener&&window.removeEventListener("syncEnabled",this.syncEnabledListener),this.syncEnabledListener=()=>{const t=e();t&&t.trim()&&this.saveImmediate(t)},window.addEventListener("syncEnabled",this.syncEnabledListener)}}const s="json_utils_shared_input",i={JSON_FORMATTER:"JSON_FORMATTER",JSON_FILTER:"JSON_FILTER",FORMAT_CONVERTER:"FORMAT_CONVERTER",SCHEMA_DETECTOR:"SCHEMA_DETECTOR"};function o(){try{const e=localStorage.getItem("json_utils_share_across_pages");return null===e||"true"===e}catch(e){return!0}}},412:(e,t,r)=>{r.d(t,{p:()=>s});const n=r(683);class s{toJSONSchema(e){const t=n(e,{required:!0,arrays:{mode:"first"},strings:{detectFormat:!1},postProcessFnc:(e,t,r)=>("number"===e&&Number.isInteger(r)&&(t.type="integer"),t)});return this.enrichArraySchemas(t,e)}isDictionaryPattern(e){if(!e||"object"!=typeof e||Array.isArray(e))return!1;const t=Object.keys(e);if(t.length<2)return!1;const r=e[t[0]];if(!r||"object"!=typeof r||Array.isArray(r))return!1;const n=JSON.stringify(this.getValueSchema(r));for(let r=1;r<t.length;r++){const s=e[t[r]];if(!s||"object"!=typeof s||Array.isArray(s))return!1;if(JSON.stringify(this.getValueSchema(s))!==n)return!1}return!0}getValueSchema(e){if(null===e)return{type:"null"};if(Array.isArray(e))return{type:"array"};const t=typeof e;return"object"===t?{type:"object",keys:Object.keys(e).sort()}:{type:t}}enrichArraySchemas(e,t){if(!e||"object"!=typeof e)return e;if("object"===e.type&&e.properties&&this.isDictionaryPattern(t)){const e=t[Object.keys(t)[0]],r=n(e,{required:!0,strings:{detectFormat:!1}});return{type:"object",additionalProperties:this.enrichArraySchemas(r,e)}}if("array"===e.type&&e.items&&Array.isArray(t)&&t.length>0){if("object"==typeof t[0]&&null!==t[0]&&!Array.isArray(t[0])){const r=new Set,s={};for(const e of t)"object"==typeof e&&null!==e&&Object.keys(e).forEach(e=>r.add(e));for(const e of r){const r=t.filter(t=>"object"==typeof t&&null!==t&&e in t).map(t=>t[e]);if(r.length>0&&(s[e]=n(r[0],{required:!0,strings:{detectFormat:!1}}),t.some(t=>"object"==typeof t&&null!==t&&null===t[e]))){const t=s[e].type;s[e].type=Array.isArray(t)?[...t,"null"]:[t,"null"]}}e.items={type:"object",properties:s,required:Array.from(r)}}e.items&&(e.items=this.enrichArraySchemas(e.items,t[0]))}if("object"===e.type&&e.properties)for(const[r,n]of Object.entries(e.properties))t&&"object"==typeof t&&r in t&&(e.properties[r]=this.enrichArraySchemas(n,t[r]));return e}inferSchema(e){const t=this.toJSONSchema(e);return this.jsonSchemaToSimple(t)}jsonSchemaToSimple(e){if(!e||"object"!=typeof e)return"any";const t=e.type;if(Array.isArray(t))return t.map(e=>this.typeToSimple(e)).join(" | ");if("object"===t){if(e.additionalProperties&&!e.properties)return{"[key: string]":this.jsonSchemaToSimple(e.additionalProperties)};if(e.properties){const t={};for(const[r,n]of Object.entries(e.properties))t[r]=this.jsonSchemaToSimple(n);return t}return"Object"}if("array"===t&&e.items){const t=this.jsonSchemaToSimple(e.items);return"object"!=typeof t||Array.isArray(t)?`Array<${t}>`:[t]}return this.typeToSimple(t)}typeToSimple(e){switch(e){case"string":return"String";case"number":return"Number";case"integer":return"Integer";case"boolean":return"Boolean";case"null":return"null";case"object":return"Object";case"array":return"Array";default:return e}}formatSchema(e,t=2){return JSON.stringify(e,null,t)}}},695:(e,t,r)=>{r.d(t,{i:()=>s});var n=r(237);r(792),r(923),r(948),r(274),r(795),r(895),r(653),r(820),r(700),r(685),r(527),r(4),r(402),r(347),r(974),r(873),r(443);class s{static initializeEditor(e,t={}){const r=document.getElementById(e);if(!r)return console.error(`Textarea with id "${e}" not found`),null;if(r.CodeMirror){console.warn(`CodeMirror already initialized on textarea "${e}", returning existing instance`);const t=r.CodeMirror;return this.instances.set(e,t),t}const s=this.instances.get(e);if(s)return console.warn(`CodeMirror instance already exists for "${e}", returning existing instance`),s;try{const s={mode:"application/json",theme:"material-darker",lineNumbers:!0,lineWrapping:!0,readOnly:!1,indentUnit:2,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0,minChars:2},extraKeys:{"Ctrl-Q":e=>e.foldCode(e.getCursor()),"Cmd-Q":e=>e.foldCode(e.getCursor()),"Alt-G":"jumpToLine"},...t},i=n.fromTextArea(r,s);return this.instances.set(e,i),i}catch(t){return console.error(`Failed to initialize CodeMirror on textarea "${e}":`,t),null}}static getInstance(e){return this.instances.get(e)||null}static cleanup(e){const t=this.instances.get(e);if(t)try{t.toTextArea(),this.instances.delete(e)}catch(t){console.error(`Error cleaning up CodeMirror instance for "${e}":`,t)}}static cleanupAll(){for(const[e]of this.instances)this.cleanup(e)}static hasInstance(e){const t=document.getElementById(e);return!(!t||!t.CodeMirror)||this.instances.has(e)}}s.instances=new Map}}]);