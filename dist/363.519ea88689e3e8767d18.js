"use strict";(self.webpackChunkjson_utils=self.webpackChunkjson_utils||[]).push([[363],{137:(e,t,r)=>{r.d(t,{d5:()=>s,qe:()=>n});class n{constructor(e){this.debounceTimer=null,this.isEnabled=!0,this.syncEnabledListener=null,this.config={autoSave:!0,debounceMs:500,...e},this.isEnabled=this.checkLocalStorageAvailable()}getActualKey(){return this.config.key,o}checkLocalStorageAvailable(){try{const e="__localStorage_test__";return localStorage.setItem(e,"test"),localStorage.removeItem(e),!0}catch(e){return console.warn("localStorage is not available:",e),!1}}save(e){this.isEnabled&&this.config.autoSave&&i()&&(this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.saveImmediate(e)},this.config.debounceMs))}saveImmediate(e){if(this.isEnabled&&i())try{const t={content:e,timestamp:Date.now()};localStorage.setItem(this.getActualKey(),JSON.stringify(t))}catch(e){console.error("Failed to save to localStorage:",e)}}load(){if(!this.isEnabled)return null;try{const e=localStorage.getItem(this.getActualKey());if(!e)return null;const t=JSON.parse(e),r=6048e5;return t.timestamp&&Date.now()-t.timestamp>r?(this.clear(),null):t.content||null}catch(e){return console.error("Failed to load from localStorage:",e),null}}clear(){if(this.isEnabled)try{localStorage.removeItem(this.getActualKey())}catch(e){console.error("Failed to clear localStorage:",e)}}hasSavedContent(){if(!this.isEnabled)return!1;try{const e=localStorage.getItem(this.getActualKey());return null!==e&&e.length>0}catch(e){return!1}}getContentAge(){if(!this.isEnabled)return null;try{const e=localStorage.getItem(this.getActualKey());if(!e)return null;const t=JSON.parse(e);return t.timestamp?Date.now()-t.timestamp:null}catch(e){return null}}setAutoSave(e){this.config.autoSave=e}cleanup(){this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),this.syncEnabledListener&&(window.removeEventListener("syncEnabled",this.syncEnabledListener),this.syncEnabledListener=null)}setupSyncEnabledListener(e){this.syncEnabledListener&&window.removeEventListener("syncEnabled",this.syncEnabledListener),this.syncEnabledListener=()=>{const t=e();t&&t.trim()&&this.saveImmediate(t)},window.addEventListener("syncEnabled",this.syncEnabledListener)}}const o="json_utils_shared_input",s={JSON_FORMATTER:"JSON_FORMATTER",JSON_FILTER:"JSON_FILTER",FORMAT_CONVERTER:"FORMAT_CONVERTER",SCHEMA_DETECTOR:"SCHEMA_DETECTOR"};function i(){try{const e=localStorage.getItem("json_utils_share_across_pages");return null===e||"true"===e}catch(e){return!0}}},306:(e,t,r)=>{var n,o;r.d(t,{MH:()=>m,Mh:()=>_,NA:()=>y,Oz:()=>h,Ur:()=>o,VV:()=>l,aB:()=>u,nO:()=>c,pp:()=>a}),function(e){e.JSON_OPERATIONS="json_operations",e.FORMAT_CONVERSION="format_conversion",e.JSONPATH_FILTER="jsonpath_filter",e.SCHEMA_DETECTION="schema_detection",e.USER_INTERACTION="user_interaction",e.NAVIGATION="navigation",e.ERROR="error"}(n||(n={})),function(e){e.FORMAT_JSON="format_json",e.MINIFY_JSON="minify_json",e.STRINGIFY_JSON="stringify_json",e.PARSE_STRING="parse_string",e.REPAIR_JSON="repair_json",e.CLEAR_INPUT="clear_input",e.LOAD_SAMPLE="load_sample",e.COPY_OUTPUT="copy_output",e.DOWNLOAD_OUTPUT="download_output",e.COPY_TO_INPUT="copy_to_input",e.CONVERT_TO_YAML="convert_to_yaml",e.CONVERT_TO_XML="convert_to_xml",e.CONVERT_TO_CSV="convert_to_csv",e.CONVERT_FROM_YAML="convert_from_yaml",e.CONVERT_FROM_XML="convert_from_xml",e.CONVERT_FROM_CSV="convert_from_csv",e.FILTER_JSON="filter_json",e.JSONPATH_QUERY="jsonpath_query",e.LOAD_JSONPATH_EXAMPLE="load_jsonpath_example",e.TOGGLE_HELP_PANEL="toggle_help_panel",e.INFER_SCHEMA="infer_schema",e.SCHEMA_FORMAT_CHANGE="schema_format_change",e.BUTTON_CLICK="button_click",e.TOGGLE_SETTING="toggle_setting",e.LANGUAGE_CHANGE="language_change",e.SHARE_TOGGLE="share_toggle",e.PAGE_VIEW="page_view",e.EXTERNAL_LINK_CLICK="external_link_click",e.JSON_PARSE_ERROR="json_parse_error",e.CONVERSION_ERROR="conversion_error",e.JSONPATH_ERROR="jsonpath_error"}(o||(o={}));class s{constructor(){this.isEnabled=!0,this.isEnabled="undefined"!=typeof window&&"function"==typeof window.gtag}static getInstance(){return s.instance||(s.instance=new s),s.instance}trackEvent(e,t,r){if(this.isEnabled)try{const n={event_category:t,...r};window.gtag("event",e,n),console.debug("[Analytics] Event tracked:",e,n)}catch(e){console.error("[Analytics] Failed to track event:",e)}else console.debug("[Analytics] Not enabled, skipping event:",e)}trackJsonOperation(e,t,r=!0){this.trackEvent(e,n.JSON_OPERATIONS,{input_size:t,success:r})}trackFormatConversion(e,t,r=!0,o){const s=`convert_${e}_to_${t}`;this.trackEvent(s,n.FORMAT_CONVERSION,{from_format:e,to_format:t,success:r,input_size:o})}trackJsonPathQuery(e,t,r=!0){this.trackEvent(o.JSONPATH_QUERY,n.JSONPATH_FILTER,{query_length:e.length,result_count:t,success:r})}trackSchemaInference(e,t,r=!0){this.trackEvent(o.INFER_SCHEMA,n.SCHEMA_DETECTION,{schema_format:e,input_size:t,success:r})}trackButtonClick(e,t){this.trackEvent(o.BUTTON_CLICK,n.USER_INTERACTION,{button_id:e,button_label:t})}trackError(e,t,r){this.trackEvent(e,n.ERROR,{error_message:t.substring(0,100),context:r})}trackExternalLink(e){this.trackEvent(o.EXTERNAL_LINK_CLICK,n.NAVIGATION,{link_url:e})}trackCopy(e,t){this.trackEvent(o.COPY_OUTPUT,n.USER_INTERACTION,{content_type:e,content_size:t})}trackDownload(e,t){this.trackEvent(o.DOWNLOAD_OUTPUT,n.USER_INTERACTION,{file_type:e,file_size:t})}}const i=s.getInstance();function a(e,t,r=!0){i.trackJsonOperation(e,t,r)}function c(e,t,r=!0,n){i.trackFormatConversion(e,t,r,n)}function l(e,t,r=!0){i.trackJsonPathQuery(e,t,r)}function u(e,t,r=!0){i.trackSchemaInference(e,t,r)}function _(e,t){i.trackButtonClick(e,t)}function h(e,t,r){i.trackError(e,t,r)}function y(e,t){i.trackCopy(e,t)}function m(e,t){i.trackDownload(e,t)}},412:(e,t,r)=>{r.d(t,{p:()=>o});const n=r(683);class o{toJSONSchema(e){const t=n(e,{required:!0,arrays:{mode:"first"},strings:{detectFormat:!1},postProcessFnc:(e,t,r)=>("number"===e&&Number.isInteger(r)&&(t.type="integer"),t)});return this.enrichArraySchemas(t,e)}isDictionaryPattern(e){if(!e||"object"!=typeof e||Array.isArray(e))return!1;const t=Object.keys(e);if(t.length<2)return!1;const r=e[t[0]];if(!r||"object"!=typeof r||Array.isArray(r))return!1;const n=JSON.stringify(this.getValueSchema(r));for(let r=1;r<t.length;r++){const o=e[t[r]];if(!o||"object"!=typeof o||Array.isArray(o))return!1;if(JSON.stringify(this.getValueSchema(o))!==n)return!1}return!0}getValueSchema(e){if(null===e)return{type:"null"};if(Array.isArray(e))return{type:"array"};const t=typeof e;return"object"===t?{type:"object",keys:Object.keys(e).sort()}:{type:t}}enrichArraySchemas(e,t){if(!e||"object"!=typeof e)return e;if("object"===e.type&&e.properties&&this.isDictionaryPattern(t)){const e=t[Object.keys(t)[0]],r=n(e,{required:!0,strings:{detectFormat:!1}});return{type:"object",additionalProperties:this.enrichArraySchemas(r,e)}}if("array"===e.type&&e.items&&Array.isArray(t)&&t.length>0){if("object"==typeof t[0]&&null!==t[0]&&!Array.isArray(t[0])){const r=new Set,o={};for(const e of t)"object"==typeof e&&null!==e&&Object.keys(e).forEach(e=>r.add(e));for(const e of r){const r=t.filter(t=>"object"==typeof t&&null!==t&&e in t).map(t=>t[e]);if(r.length>0&&(o[e]=n(r[0],{required:!0,strings:{detectFormat:!1}}),t.some(t=>"object"==typeof t&&null!==t&&null===t[e]))){const t=o[e].type;o[e].type=Array.isArray(t)?[...t,"null"]:[t,"null"]}}e.items={type:"object",properties:o,required:Array.from(r)}}e.items&&(e.items=this.enrichArraySchemas(e.items,t[0]))}if("object"===e.type&&e.properties)for(const[r,n]of Object.entries(e.properties))t&&"object"==typeof t&&r in t&&(e.properties[r]=this.enrichArraySchemas(n,t[r]));return e}inferSchema(e){const t=this.toJSONSchema(e);return this.jsonSchemaToSimple(t)}jsonSchemaToSimple(e){if(!e||"object"!=typeof e)return"any";const t=e.type;if(Array.isArray(t))return t.map(e=>this.typeToSimple(e)).join(" | ");if("object"===t){if(e.additionalProperties&&!e.properties)return{"[key: string]":this.jsonSchemaToSimple(e.additionalProperties)};if(e.properties){const t={};for(const[r,n]of Object.entries(e.properties))t[r]=this.jsonSchemaToSimple(n);return t}return"Object"}if("array"===t&&e.items){const t=this.jsonSchemaToSimple(e.items);return"object"!=typeof t||Array.isArray(t)?`Array<${t}>`:[t]}return this.typeToSimple(t)}typeToSimple(e){switch(e){case"string":return"String";case"number":return"Number";case"integer":return"Integer";case"boolean":return"Boolean";case"null":return"null";case"object":return"Object";case"array":return"Array";default:return e}}formatSchema(e,t=2){return JSON.stringify(e,null,t)}}},695:(e,t,r)=>{r.d(t,{i:()=>o});var n=r(237);r(792),r(923),r(948),r(274),r(795),r(895),r(653),r(820),r(700),r(685),r(527),r(4),r(402),r(347),r(974),r(873),r(443);class o{static initializeEditor(e,t={}){const r=document.getElementById(e);if(!r)return console.error(`Textarea with id "${e}" not found`),null;if(r.CodeMirror){console.warn(`CodeMirror already initialized on textarea "${e}", returning existing instance`);const t=r.CodeMirror;return this.instances.set(e,t),t}const o=this.instances.get(e);if(o)return console.warn(`CodeMirror instance already exists for "${e}", returning existing instance`),o;try{const o={mode:"application/json",theme:"material-darker",lineNumbers:!0,lineWrapping:!0,readOnly:!1,indentUnit:2,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0,minChars:2},extraKeys:{"Ctrl-Q":e=>e.foldCode(e.getCursor()),"Cmd-Q":e=>e.foldCode(e.getCursor()),"Alt-G":"jumpToLine"},...t},s=n.fromTextArea(r,o);return this.instances.set(e,s),s}catch(t){return console.error(`Failed to initialize CodeMirror on textarea "${e}":`,t),null}}static getInstance(e){return this.instances.get(e)||null}static cleanup(e){const t=this.instances.get(e);if(t)try{t.toTextArea(),this.instances.delete(e)}catch(t){console.error(`Error cleaning up CodeMirror instance for "${e}":`,t)}}static cleanupAll(){for(const[e]of this.instances)this.cleanup(e)}static hasInstance(e){const t=document.getElementById(e);return!(!t||!t.CodeMirror)||this.instances.has(e)}}o.instances=new Map}}]);