"use strict";(self.webpackChunkjson_utils=self.webpackChunkjson_utils||[]).push([[514],{239:(t,e,i)=>{i.d(e,{JSONPathFilter:()=>r});var n=i(615),s=i(695);class r{constructor(){this.initializeElements(),this.initializeEditors(),this.attachEventListeners()}initializeElements(){this.jsonPathInput=document.getElementById("jsonpath-input"),this.resultCount=document.getElementById("result-count"),this.resultType=document.getElementById("result-type")}initializeEditors(){const t=s.i.initializeEditor("jsonFilterInput",{mode:"application/json",readOnly:!1});if(!t)throw new Error("Failed to initialize input editor");this.inputEditor=t;const e=s.i.initializeEditor("jsonFilterOutput",{mode:"application/json",readOnly:!0});if(!e)throw new Error("Failed to initialize output editor");this.outputEditor=e}attachEventListeners(){const t=document.getElementById("filterBtn"),e=document.getElementById("clearFilterBtn"),i=document.getElementById("clearFilterInputBtn"),n=document.getElementById("loadFilterSampleBtn"),s=document.getElementById("copyFilterBtn"),r=document.getElementById("downloadFilterBtn"),o=document.getElementById("toggle-help");t&&t.addEventListener("click",()=>this.filterJSON()),e&&e.addEventListener("click",()=>this.clearAll()),i&&i.addEventListener("click",()=>this.clearInput()),n&&n.addEventListener("click",()=>this.loadExample()),s&&s.addEventListener("click",()=>this.copyResult()),r&&r.addEventListener("click",()=>this.downloadResult()),o&&o.addEventListener("click",()=>this.closeDrawer());const l=document.getElementById("drawer-trigger");l&&l.addEventListener("click",()=>this.openDrawer()),document.querySelectorAll(".example-item").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-expression");e&&this.jsonPathInput&&(this.jsonPathInput.value=e,this.filterJSON())})}),this.jsonPathInput&&this.jsonPathInput.addEventListener("input",()=>{this.debounce(()=>this.filterJSON(),300)()}),this.setupDynamicHeight()}debounce(t,e){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{clearTimeout(i),t(...n)},e)}}filterJSON(){const t=this.inputEditor?.getValue().trim(),e=this.jsonPathInput?.value.trim();if(t&&e)try{const i=JSON.parse(t),s=n.query(i,e);this.displayResults(s),this.updateResultInfo(s)}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.displayError(`Error: ${e}`)}else this.clearResults()}displayResults(t){if(!this.outputEditor)return;if(0===t.length)return void this.outputEditor.setValue("No matches found");let e;e=1===t.length?JSON.stringify(t[0],null,2):JSON.stringify(t,null,2),this.outputEditor.setValue(e)}displayError(t){this.outputEditor&&this.outputEditor.setValue(t),this.clearResultInfo()}updateResultInfo(t){if(this.resultCount&&(this.resultCount.textContent=`Found ${t.length} result${1!==t.length?"s":""}`),this.resultType&&t.length>0){const e=t[0],i=Array.isArray(e)?"Array":typeof e;this.resultType.textContent=`Type: ${i}`}}clearResultInfo(){this.resultCount&&(this.resultCount.textContent=""),this.resultType&&(this.resultType.textContent="")}clearResults(){this.outputEditor&&this.outputEditor.setValue(""),this.clearResultInfo()}clearInput(){this.inputEditor&&this.inputEditor.setValue("")}clearAll(){this.inputEditor&&this.inputEditor.setValue(""),this.jsonPathInput&&(this.jsonPathInput.value=""),this.clearResults()}loadExample(){this.inputEditor&&this.inputEditor.setValue(JSON.stringify({store:{book:[{category:"reference",author:"Nigel Rees",title:"Sayings of the Century",price:8.95},{category:"fiction",author:"Evelyn Waugh",title:"Sword of Honour",price:12.99},{category:"fiction",author:"Herman Melville",title:"Moby Dick",isbn:"0-553-21311-3",price:8.99},{category:"fiction",author:"J. R. R. Tolkien",title:"The Lord of the Rings",isbn:"0-395-19395-8",price:22.99}],bicycle:{color:"red",price:19.95}}},null,2)),this.jsonPathInput&&(this.jsonPathInput.value="$.store.book[*].title"),this.filterJSON()}async copyResult(){const t=this.outputEditor?.getValue();if(t)try{await navigator.clipboard.writeText(t),alert("Result copied to clipboard!")}catch(e){const i=document.createElement("textarea");i.value=t,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),alert("Result copied to clipboard!")}else alert("No result to copy")}downloadResult(){const t=this.outputEditor?.getValue();if(!t)return void alert("No result to download");const e=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download="jsonpath-result.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)}openDrawer(){const t=document.querySelector(".help-panel"),e=document.querySelector(".jsonpath-layout"),i=document.getElementById("drawer-trigger");t&&(t.classList.contains("open")?(t.classList.remove("open"),t.classList.add("hidden"),e&&e.classList.remove("drawer-open"),i&&(i.style.display="flex")):(t.classList.remove("hidden"),t.classList.add("open"),e&&e.classList.add("drawer-open"),i&&(i.style.display="none")))}closeDrawer(){const t=document.querySelector(".help-panel"),e=document.querySelector(".jsonpath-layout"),i=document.getElementById("drawer-trigger");t&&(t.classList.remove("open"),t.classList.add("hidden"),e&&e.classList.remove("drawer-open"),i&&(i.style.display="flex"))}toggleHelpPanel(){const t=document.querySelector(".help-panel"),e=document.querySelector(".jsonpath-layout");t&&e&&(t.classList.contains("hidden")?(t.classList.remove("hidden"),e.style.gridTemplateColumns="2fr 1fr"):(t.classList.add("hidden"),e.style.gridTemplateColumns="1fr"))}setupDynamicHeight(){if(!this.inputEditor)return;const t=this.inputEditor.getWrapperElement();t&&(this.inputEditor.on("focus",()=>{t.classList.add("cm-input-focused"),setTimeout(()=>{this.inputEditor.refresh()},350)}),this.inputEditor.on("blur",()=>{t.classList.remove("cm-input-focused"),setTimeout(()=>{this.inputEditor.refresh()},350)}))}}},695:(t,e,i)=>{i.d(e,{i:()=>s});var n=i(237);i(792),i(923),i(948),i(274),i(795),i(402),i(347),i(974);class s{static initializeEditor(t,e={}){const i=document.getElementById(t);if(!i)return console.error(`Textarea with id "${t}" not found`),null;if(i.CodeMirror){console.warn(`CodeMirror already initialized on textarea "${t}", returning existing instance`);const e=i.CodeMirror;return this.instances.set(t,e),e}const s=this.instances.get(t);if(s)return console.warn(`CodeMirror instance already exists for "${t}", returning existing instance`),s;try{const s={mode:"application/json",theme:"material-darker",lineNumbers:!0,lineWrapping:!0,readOnly:!1,indentUnit:2,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,extraKeys:{"Ctrl-Q":t=>t.foldCode(t.getCursor()),"Cmd-Q":t=>t.foldCode(t.getCursor())},...e},r=n.fromTextArea(i,s);return this.instances.set(t,r),r}catch(e){return console.error(`Failed to initialize CodeMirror on textarea "${t}":`,e),null}}static getInstance(t){return this.instances.get(t)||null}static cleanup(t){const e=this.instances.get(t);if(e)try{e.toTextArea(),this.instances.delete(t)}catch(e){console.error(`Error cleaning up CodeMirror instance for "${t}":`,e)}}static cleanupAll(){for(const[t]of this.instances)this.cleanup(t)}static hasInstance(t){const e=document.getElementById(t);return!(!e||!e.CodeMirror)||this.instances.has(t)}}s.instances=new Map}}]);