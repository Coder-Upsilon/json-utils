"use strict";(self.webpackChunkjson_utils=self.webpackChunkjson_utils||[]).push([[431],{258:(t,e,n)=>{n.d(e,{JSONUtils:()=>L});class s extends Error{constructor(t,e){super(`${t} at position ${e}`),this.position=e}}function i(t){return/^[0-9A-Fa-f]$/.test(t)}function r(t){return t>="0"&&t<="9"}function o(t){return t>=" "}function u(t){return",:[]/{}()\n+".includes(t)}function a(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||"_"===t||"$"===t}function l(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||"_"===t||"$"===t||t>="0"&&t<="9"}const c=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,h=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function p(t){return",[]/{}\n+".includes(t)}function d(t){return O(t)||f.test(t)}const f=/^[[{\w-]$/;function m(t){return"\n"===t||"\r"===t||"\t"===t||"\b"===t||"\f"===t}function g(t,e){const n=t.charCodeAt(e);return 32===n||10===n||9===n||13===n}function S(t,e){const n=t.charCodeAt(e);return 32===n||9===n||13===n}function y(t,e){const n=t.charCodeAt(e);return 160===n||n>=8192&&n<=8202||8239===n||8287===n||12288===n}function O(t){return w(t)||$(t)}function w(t){return'"'===t||"“"===t||"”"===t}function E(t){return'"'===t}function $(t){return"'"===t||"‘"===t||"’"===t||"`"===t||"´"===t}function N(t){return"'"===t}function J(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=t.lastIndexOf(e);return-1!==s?t.substring(0,s)+(n?"":t.substring(s+1)):t}function B(t,e){let n=t.length;if(!g(t,n-1))return t+e;for(;g(t,n-1);)n--;return t.substring(0,n)+e+t.substring(n)}function v(t,e,n){return t.substring(0,e)+t.substring(e+n)}const b={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},x={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function j(t){let e=0,n="";T(["```","[```","{```"]),j()||function(){throw new s("Unexpected end of json string",t.length)}(),T(["```","```]","```}"]);const f=C(",");for(f&&k(),d(t[e])&&function(t){return/[,\n][ \t\r]*$/.test(t)}(n)?(f||(n=B(n,",")),function(){let t=!0,e=!0;for(;e;)t?t=!1:C(",")||(n=B(n,",")),e=j();e||(n=J(n,",")),n=`[\n${n}\n]`}()):f&&(n=J(n,","));"}"===t[e]||"]"===t[e];)e++,k();if(e>=t.length)return n;function j(){k();const s=function(){if("{"===t[e]){n+="{",e++,k(),M(",")&&k();let s=!0;for(;e<t.length&&"}"!==t[e];){let i;if(s?(i=!0,s=!1):(i=C(","),i||(n=B(n,",")),k()),U(),!V()&&!Y(!0)){"}"===t[e]||"{"===t[e]||"]"===t[e]||"["===t[e]||void 0===t[e]?n=J(n,","):Z();break}k();const r=C(":"),o=e>=t.length;r||(d(t[e])||o?n=B(n,":"):D()),j()||(r||o?n+="null":D())}return"}"===t[e]?(n+="}",e++):n=B(n,"}"),!0}return!1}()||function(){if("["===t[e]){n+="[",e++,k(),M(",")&&k();let s=!0;for(;e<t.length&&"]"!==t[e];)if(s?s=!1:C(",")||(n=B(n,",")),U(),!j()){n=J(n,",");break}return"]"===t[e]?(n+="]",e++):n=B(n,"]"),!0}return!1}()||V()||function(){const s=e;if("-"===t[e]){if(e++,q())return F(s),!0;if(!r(t[e]))return e=s,!1}for(;r(t[e]);)e++;if("."===t[e]){if(e++,q())return F(s),!0;if(!r(t[e]))return e=s,!1;for(;r(t[e]);)e++}if("e"===t[e]||"E"===t[e]){if(e++,"-"!==t[e]&&"+"!==t[e]||e++,q())return F(s),!0;if(!r(t[e]))return e=s,!1;for(;r(t[e]);)e++}if(!q())return e=s,!1;if(e>s){const i=t.slice(s,e),r=/^0\d/.test(i);return n+=r?`"${i}"`:i,!0}return!1}()||P("true","true")||P("false","false")||P("null","null")||P("True","true")||P("False","false")||P("None","null")||Y(!1)||function(){if("/"===t[e]){const s=e;for(e++;e<t.length&&("/"!==t[e]||"\\"===t[e-1]);)e++;return e++,n+=`"${t.substring(s,e)}"`,!0}}();return k(),s}function k(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=e;let s=L(t);do{s=A(),s&&(s=L(t))}while(s);return e>n}function L(s){const i=s?g:S;let r="";for(;;)if(i(t,e))r+=t[e],e++;else{if(!y(t,e))break;r+=" ",e++}return r.length>0&&(n+=r,!0)}function A(){if("/"===t[e]&&"*"===t[e+1]){for(;e<t.length&&!I(t,e);)e++;return e+=2,!0}if("/"===t[e]&&"/"===t[e+1]){for(;e<t.length&&"\n"!==t[e];)e++;return!0}return!1}function T(n){if(function(n){for(const s of n){const n=e+s.length;if(t.slice(e,n)===s)return e=n,!0}return!1}(n)){if(a(t[e]))for(;e<t.length&&l(t[e]);)e++;return k(),!0}return!1}function C(s){return t[e]===s&&(n+=t[e],e++,!0)}function M(n){return t[e]===n&&(e++,!0)}function z(){return M("\\")}function U(){return k(),"."===t[e]&&"."===t[e+1]&&"."===t[e+2]&&(e+=3,k(),M(","),!0)}function V(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,l="\\"===t[e];if(l&&(e++,l=!0),O(t[e])){const d=E(t[e])?E:N(t[e])?N:$(t[e])?$:w,f=e,g=n.length;let S='"';for(e++;;){if(e>=t.length){const i=_(e-1);return!s&&u(t.charAt(i))?(e=f,n=n.substring(0,g),V(!0)):(S=B(S,'"'),n+=S,!0)}if(e===a)return S=B(S,'"'),n+=S,!0;if(d(t[e])){const i=e,o=S.length;if(S+='"',e++,n+=S,k(!1),s||e>=t.length||u(t[e])||O(t[e])||r(t[e]))return X(),!0;const a=_(i-1),l=t.charAt(a);if(","===l)return e=f,n=n.substring(0,g),V(!1,a);if(u(l))return e=f,n=n.substring(0,g),V(!0);n=n.substring(0,g),e=i+1,S=`${S.substring(0,o)}\\${S.substring(o)}`}else{if(s&&p(t[e])){if(":"===t[e-1]&&c.test(t.substring(f+1,e+2)))for(;e<t.length&&h.test(t[e]);)S+=t[e],e++;return S=B(S,'"'),n+=S,X(),!0}if("\\"===t[e]){const n=t.charAt(e+1);if(void 0!==x[n])S+=t.slice(e,e+2),e+=2;else if("u"===n){let n=2;for(;n<6&&i(t[e+n]);)n++;6===n?(S+=t.slice(e,e+6),e+=6):e+n>=t.length?e=t.length:K()}else S+=n,e+=2}else{const n=t.charAt(e);'"'===n&&"\\"!==t[e-1]?(S+=`\\${n}`,e++):m(n)?(S+=b[n],e++):(o(n)||R(n),S+=n,e++)}}l&&z()}}return!1}function X(){let s=!1;for(k();"+"===t[e];){s=!0,e++,k(),n=J(n,'"',!0);const t=n.length,i=V();n=i?v(n,t,1):B(n,'"')}return s}function P(s,i){return t.slice(e,e+s.length)===s&&(n+=i,e+=s.length,!0)}function Y(s){const i=e;if(a(t[e])){for(;e<t.length&&l(t[e]);)e++;let n=e;for(;g(t,n);)n++;if("("===t[n])return e=n+1,j(),")"===t[e]&&(e++,";"===t[e]&&e++),!0}for(;e<t.length&&!p(t[e])&&!O(t[e])&&(!s||":"!==t[e]);)e++;if(":"===t[e-1]&&c.test(t.substring(i,e+2)))for(;e<t.length&&h.test(t[e]);)e++;if(e>i){for(;g(t,e-1)&&e>0;)e--;const s=t.slice(i,e);return n+="undefined"===s?"null":JSON.stringify(s),'"'===t[e]&&e++,!0}}function _(e){let n=e;for(;n>0&&g(t,n);)n--;return n}function q(){return e>=t.length||u(t[e])||g(t,e)}function F(s){n+=`${t.slice(s,e)}0`}function R(t){throw new s(`Invalid character ${JSON.stringify(t)}`,e)}function Z(){throw new s("Object key expected",e)}function D(){throw new s("Colon expected",e)}function K(){const n=t.slice(e,e+6);throw new s(`Invalid unicode character "${n}"`,e)}!function(){throw new s(`Unexpected character ${JSON.stringify(t[e])}`,e)}()}function I(t,e){return"*"===t[e]&&"/"===t[e+1]}var k=n(695);class L{constructor(){this.currentOutputType="json",this.initializeElements(),this.initializeEditors(),this.attachEventListeners()}initializeElements(){this.elements={clearBtn:this.getElementById("clearBtn"),loadSampleBtn:this.getElementById("loadSampleBtn"),formatBtn:this.getElementById("formatBtn"),minifyBtn:this.getElementById("minifyBtn"),validateBtn:this.getElementById("validateBtn"),toYamlBtn:this.getElementById("toYamlBtn"),toXmlBtn:this.getElementById("toXmlBtn"),fixJsonBtn:this.getElementById("fixJsonBtn"),stringifyBtn:this.getElementById("stringifyBtn"),parseBtn:this.getElementById("parseBtn"),copyToInputBtn:this.getElementById("copyToInputBtn"),copyBtn:this.getElementById("copyBtn"),downloadBtn:this.getElementById("downloadBtn"),inputStatus:this.getElementById("inputStatus"),outputStatus:this.getElementById("outputStatus"),resizeBar:this.getElementById("resizeBar"),inputPanel:this.getElementBySelector(".input-panel"),outputPanel:this.getElementBySelector(".output-panel"),editorSection:this.getElementBySelector(".editor-section")}}getElementById(t){const e=document.getElementById(t);if(!e)throw new Error(`Element with id "${t}" not found`);return e}getElementBySelector(t){const e=document.querySelector(t);if(!e)throw new Error(`Element with selector "${t}" not found`);return e}initializeEditors(){const t=k.i.initializeEditor("jsonInput",{mode:"application/json",readOnly:!1});if(!t)throw new Error("Failed to initialize input editor");this.inputEditor=t,this.inputEditor.setOption("readOnly",!1),this.inputEditor.on("change",()=>{this.debounce(()=>this.validateInput(),500)()});const e=k.i.initializeEditor("output",{mode:"application/json",readOnly:!0});if(!e)throw new Error("Failed to initialize output editor");this.outputEditor=e}attachEventListeners(){this.elements.clearBtn.addEventListener("click",()=>this.clearInput()),this.elements.loadSampleBtn.addEventListener("click",()=>this.loadSample()),this.elements.formatBtn.addEventListener("click",()=>this.formatJSON()),this.elements.minifyBtn.addEventListener("click",()=>this.minifyJSON()),this.elements.validateBtn.addEventListener("click",()=>this.validateJSON()),this.elements.toYamlBtn.addEventListener("click",()=>this.convertToYAML()),this.elements.toXmlBtn.addEventListener("click",()=>this.convertToXML()),this.elements.fixJsonBtn.addEventListener("click",()=>this.fixJSON()),this.elements.stringifyBtn.addEventListener("click",()=>this.stringifyJSON()),this.elements.parseBtn.addEventListener("click",()=>this.parseJSONString()),this.elements.copyToInputBtn.addEventListener("click",()=>this.copyToInput()),this.elements.copyBtn.addEventListener("click",()=>this.copyOutput()),this.elements.downloadBtn.addEventListener("click",()=>this.downloadOutput())}debounce(t,e){let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...s)},e)}}clearInput(){this.inputEditor.setValue(""),this.clearStatus()}loadSample(){const t=JSON.stringify({name:"John Doe",age:30,city:"New York",hobbies:["reading","swimming","coding"],address:{street:"123 Main St",zipCode:"10001"},isActive:!0,balance:1250.5,spouse:null},null,2);this.inputEditor.setValue(t),this.validateInput()}validateInput(){const t=this.inputEditor.getValue().trim();if(t)try{JSON.parse(t),this.showStatus(this.elements.inputStatus,"Valid JSON","success")}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.showStatus(this.elements.inputStatus,`Invalid JSON: ${e}`,"error")}else this.clearStatus()}formatJSON(){const t=this.inputEditor.getValue().trim();if(t)try{const e=JSON.parse(t),n=JSON.stringify(e,null,2);this.displayOutput(n,"application/json"),this.currentOutputType="json",this.showStatus(this.elements.outputStatus,"JSON formatted successfully","success")}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.showStatus(this.elements.outputStatus,`Error formatting JSON: ${e}`,"error")}else this.showStatus(this.elements.outputStatus,"Please enter JSON data first","error")}minifyJSON(){const t=this.inputEditor.getValue().trim();if(t)try{const e=JSON.parse(t),n=JSON.stringify(e);this.displayOutput(n,"application/json"),this.currentOutputType="json",this.showStatus(this.elements.outputStatus,"JSON minified successfully","success")}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.showStatus(this.elements.outputStatus,`Error minifying JSON: ${e}`,"error")}else this.showStatus(this.elements.outputStatus,"Please enter JSON data first","error")}validateJSON(){const t=this.inputEditor.getValue().trim();if(t)try{const e=JSON.parse(t),n=this.analyzeJSON(e);this.displayOutput(`✅ Valid JSON!\n\n${n}`,"text/plain"),this.currentOutputType="text",this.showStatus(this.elements.outputStatus,"JSON is valid","success")}catch(e){const n=this.getDetailedError(e,t);this.displayOutput(`❌ Invalid JSON!\n\n${n}`,"text/plain"),this.currentOutputType="text",this.showStatus(this.elements.outputStatus,"JSON validation failed","error")}else this.showStatus(this.elements.outputStatus,"Please enter JSON data first","error")}analyzeJSON(t){const e=[],n=Array.isArray(t)?"Array":typeof t;if(e.push(`Type: ${n}`),Array.isArray(t))e.push(`Length: ${t.length} items`);else if("object"==typeof t&&null!==t){const n=Object.keys(t);e.push(`Properties: ${n.length}`),e.push(`Keys: ${n.join(", ")}`)}return e.push(`Size: ${JSON.stringify(t).length} characters`),e.join("\n")}getDetailedError(t,e){const n=t instanceof Error?t.message:"Unknown error",s=e.split("\n"),i=[`Error: ${n}`],r=n.match(/line (\d+)/i);if(r){const t=parseInt(r[1]);i.push(`Line ${t}: ${s[t-1]||"N/A"}`)}return n.includes("Unexpected token")&&(i.push("\nCommon fixes:"),i.push("• Check for missing commas between properties"),i.push("• Ensure all strings are quoted with double quotes"),i.push("• Remove trailing commas"),i.push("• Check for unescaped quotes in strings")),i.join("\n")}convertToYAML(){const t=this.inputEditor.getValue().trim();if(t)try{const e=JSON.parse(t),n=this.jsonToYAML(e);this.displayOutput(n,"text/x-yaml"),this.currentOutputType="yaml",this.showStatus(this.elements.outputStatus,"Converted to YAML successfully","success")}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.showStatus(this.elements.outputStatus,`Error converting to YAML: ${e}`,"error")}else this.showStatus(this.elements.outputStatus,"Please enter JSON data first","error")}jsonToYAML(t,e=0){const n="  ".repeat(e);if(null===t)return"null";if("boolean"==typeof t)return t.toString();if("number"==typeof t)return t.toString();if("string"==typeof t)return t.includes("\n")||t.includes(":")||t.includes("#")||t.includes("[")||t.includes("]")?`"${t.replace(/"/g,'\\"')}"`:t;if(Array.isArray(t))return 0===t.length?"[]":t.map(t=>`${n}- ${this.jsonToYAML(t,e+1).replace(/^\s+/,"")}`).join("\n");if("object"==typeof t){const s=Object.keys(t);return 0===s.length?"{}":s.map(s=>{const i=t[s],r=this.jsonToYAML(i,e+1);return"object"!=typeof i||null===i||Array.isArray(i)?Array.isArray(i)&&i.length>0?`${n}${s}:\n${r}`:`${n}${s}: ${r}`:`${n}${s}:\n${r}`}).join("\n")}return t.toString()}convertToXML(){const t=this.inputEditor.getValue().trim();if(t)try{const e=JSON.parse(t),n=`<?xml version="1.0" encoding="UTF-8"?>\n<root>\n${this.jsonToXML(e)}\n</root>`;this.displayOutput(n,"application/xml"),this.currentOutputType="xml",this.showStatus(this.elements.outputStatus,"Converted to XML successfully","success")}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.showStatus(this.elements.outputStatus,`Error converting to XML: ${e}`,"error")}else this.showStatus(this.elements.outputStatus,"Please enter JSON data first","error")}jsonToXML(t,e=1){const n="  ".repeat(e);return null===t?`${n}<null/>`:"boolean"==typeof t?`${n}<boolean>${t}</boolean>`:"number"==typeof t?`${n}<number>${t}</number>`:"string"==typeof t?`${n}<string>${this.escapeXML(t)}</string>`:Array.isArray(t)?t.map((t,s)=>`${n}<item index="${s}">\n${this.jsonToXML(t,e+1)}\n${n}</item>`).join("\n"):"object"==typeof t?Object.keys(t).map(s=>{const i=t[s],r=s.replace(/[^a-zA-Z0-9_-]/g,"_");return"object"==typeof i&&null!==i?`${n}<${r}>\n${this.jsonToXML(i,e+1)}\n${n}</${r}>`:`${n}<${r}>${this.escapeXML(String(i))}</${r}>`}).join("\n"):`${n}<value>${this.escapeXML(String(t))}</value>`}escapeXML(t){return t.replace(/[<>&'"]/g,t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}})}fixJSON(){const t=this.inputEditor.getValue().trim();if(t)try{return JSON.parse(t),void this.showStatus(this.elements.outputStatus,"JSON is already valid!","info")}catch(e){try{const e=this.customJSONRepair(t),n=JSON.parse(e),s=JSON.stringify(n,null,2);return this.displayOutput(s,"application/json"),this.currentOutputType="json",void this.showStatus(this.elements.outputStatus,"JSON fixed successfully! Please verify the result.","success")}catch(e){try{const e=j(t),n=JSON.parse(e),s=JSON.stringify(n,null,2);this.displayOutput(s,"application/json"),this.currentOutputType="json",this.showStatus(this.elements.outputStatus,"JSON fixed successfully! Please verify the result.","success")}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.showStatus(this.elements.outputStatus,`Could not auto-fix JSON: ${e}`,"error")}}}else this.showStatus(this.elements.outputStatus,"Please enter JSON data first","error")}stringifyJSON(){const t=this.inputEditor.getValue().trim();if(t)try{const e=JSON.parse(t),n=JSON.stringify(e),s=JSON.stringify(n);this.displayOutput(s,"text/plain"),this.currentOutputType="text",this.showStatus(this.elements.outputStatus,"JSON converted to string successfully","success")}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.showStatus(this.elements.outputStatus,`Error stringifying JSON: ${e}`,"error")}else this.showStatus(this.elements.outputStatus,"Please enter JSON data first","error")}parseJSONString(){const t=this.inputEditor.getValue().trim();if(t)try{const e=JSON.parse(t);if("string"!=typeof e)return void this.showStatus(this.elements.outputStatus,"Input must be a JSON string (quoted string containing JSON)","error");const n=JSON.parse(e),s=JSON.stringify(n,null,2);this.displayOutput(s,"application/json"),this.currentOutputType="json",this.showStatus(this.elements.outputStatus,"JSON string parsed successfully","success")}catch(e){try{const e=j(t),n=JSON.parse(e);if("string"!=typeof n)return void this.showStatus(this.elements.outputStatus,"Input must be a JSON string (quoted string containing JSON)","error");const s=JSON.parse(n),i=JSON.stringify(s,null,2);this.displayOutput(i,"application/json"),this.currentOutputType="json",this.showStatus(this.elements.outputStatus,"Input repaired and JSON string parsed successfully! Please verify the result.","success")}catch(t){const n=e instanceof Error?e.message:"Unknown error";this.showStatus(this.elements.outputStatus,`Error parsing JSON string: ${n}`,"error")}}else this.showStatus(this.elements.outputStatus,"Please enter a JSON string first","error")}customJSONRepair(t){let e=t;return e=e.replace(/("[\w\s]+"):\s*"([^"]*?)\s+"([^"]+"):/g,'$1: "$2", "$3":'),e=e.replace(/("[\w\s]+"):\s*"([^"]*?)\s+("[\w\s]+"):/g,'$1: "$2", $3:'),e=e.replace(/'/g,'"'),e=e.replace(/([{,]\s*)([a-zA-Z_$][a-zA-Z0-9_$]*)\s*:/g,'$1"$2":'),e=e.replace(/,(\s*[}\]])/g,"$1"),e=e.replace(/("\s*)\s+("[\w\s]+"):/g,"$1, $2:"),e}copyToInput(){const t=this.outputEditor.getValue();t?(this.inputEditor.setValue(t),this.validateInput(),this.showStatus(this.elements.outputStatus,"Output copied to input!","success")):this.showStatus(this.elements.outputStatus,"No output to copy","error")}async copyOutput(){const t=this.outputEditor.getValue();if(t)try{await navigator.clipboard.writeText(t),this.showStatus(this.elements.outputStatus,"Output copied to clipboard!","success")}catch(e){const n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),this.showStatus(this.elements.outputStatus,"Output copied to clipboard!","success")}else this.showStatus(this.elements.outputStatus,"No output to copy","error")}downloadOutput(){const t=this.outputEditor.getValue();if(!t)return void this.showStatus(this.elements.outputStatus,"No output to download","error");const e=`output.${{json:"json",yaml:"yaml",xml:"xml",text:"txt"}[this.currentOutputType]||"txt"}`,n=new Blob([t],{type:"text/plain"}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),this.showStatus(this.elements.outputStatus,`File downloaded as ${e}`,"success")}showStatus(t,e,n){t.textContent=e,t.className=`status-inline ${n}`}clearStatus(){this.elements.inputStatus.textContent="",this.elements.inputStatus.className="status-inline",this.elements.outputStatus.textContent="",this.elements.outputStatus.className="status-inline"}displayOutput(t,e){this.outputEditor.setValue(t),this.outputEditor.setOption("mode",e)}}},695:(t,e,n)=>{n.d(e,{i:()=>i});var s=n(237);n(792),n(923),n(948),n(274),n(795),n(402),n(347),n(974);class i{static initializeEditor(t,e={}){const n=document.getElementById(t);if(!n)return console.error(`Textarea with id "${t}" not found`),null;if(n.CodeMirror){console.warn(`CodeMirror already initialized on textarea "${t}", returning existing instance`);const e=n.CodeMirror;return this.instances.set(t,e),e}const i=this.instances.get(t);if(i)return console.warn(`CodeMirror instance already exists for "${t}", returning existing instance`),i;try{const i={mode:"application/json",theme:"material-darker",lineNumbers:!0,lineWrapping:!0,readOnly:!1,indentUnit:2,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,extraKeys:{"Ctrl-Q":t=>t.foldCode(t.getCursor()),"Cmd-Q":t=>t.foldCode(t.getCursor())},...e},r=s.fromTextArea(n,i);return this.instances.set(t,r),r}catch(e){return console.error(`Failed to initialize CodeMirror on textarea "${t}":`,e),null}}static getInstance(t){return this.instances.get(t)||null}static cleanup(t){const e=this.instances.get(t);if(e)try{e.toTextArea(),this.instances.delete(t)}catch(e){console.error(`Error cleaning up CodeMirror instance for "${t}":`,e)}}static cleanupAll(){for(const[t]of this.instances)this.cleanup(t)}static hasInstance(t){const e=document.getElementById(t);return!(!e||!e.CodeMirror)||this.instances.has(t)}}i.instances=new Map}}]);