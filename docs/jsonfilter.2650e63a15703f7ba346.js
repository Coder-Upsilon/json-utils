(()=>{"use strict";var t,e={177:(t,e,i)=>{i(792),i(948),i(274),i(795),i(802),i(257);var n=i(615),r=i(237);i(923);class o{static initializeEditor(t,e={}){const i=document.getElementById(t);if(!i)return console.error(`Textarea with id "${t}" not found`),null;if(i.CodeMirror){console.warn(`CodeMirror already initialized on textarea "${t}", returning existing instance`);const e=i.CodeMirror;return this.instances.set(t,e),e}const n=this.instances.get(t);if(n)return console.warn(`CodeMirror instance already exists for "${t}", returning existing instance`),n;try{const n={mode:"application/json",theme:"material-darker",lineNumbers:!0,lineWrapping:!0,readOnly:!1,indentUnit:2,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,extraKeys:{"Ctrl-Q":t=>t.foldCode(t.getCursor()),"Cmd-Q":t=>t.foldCode(t.getCursor())},...e},o=r.fromTextArea(i,n);return this.instances.set(t,o),console.log(`CodeMirror successfully initialized on textarea "${t}"`),o}catch(e){return console.error(`Failed to initialize CodeMirror on textarea "${t}":`,e),null}}static getInstance(t){return this.instances.get(t)||null}static cleanup(t){const e=this.instances.get(t);if(e)try{e.toTextArea(),this.instances.delete(t),console.log(`CodeMirror instance for "${t}" cleaned up`)}catch(e){console.error(`Error cleaning up CodeMirror instance for "${t}":`,e)}}static cleanupAll(){for(const[t]of this.instances)this.cleanup(t)}static hasInstance(t){const e=document.getElementById(t);return!(!e||!e.CodeMirror)||this.instances.has(t)}}o.instances=new Map;class s{constructor(){this.initializeElements(),this.initializeEditors(),this.attachEventListeners()}initializeElements(){this.jsonPathInput=document.getElementById("jsonpath-input"),this.resultCount=document.getElementById("result-count"),this.resultType=document.getElementById("result-type")}initializeEditors(){const t=o.initializeEditor("jsonFilterInput",{mode:"application/json",readOnly:!1});if(!t)throw new Error("Failed to initialize input editor");this.inputEditor=t,console.log("Input editor initialized successfully");const e=o.initializeEditor("jsonFilterOutput",{mode:"application/json",readOnly:!0});if(!e)throw new Error("Failed to initialize output editor");this.outputEditor=e,console.log("Output editor readOnly status:",this.outputEditor.getOption("readOnly"))}attachEventListeners(){const t=document.getElementById("filterBtn"),e=document.getElementById("clearFilterBtn"),i=document.getElementById("clearFilterInputBtn"),n=document.getElementById("loadFilterSampleBtn"),r=document.getElementById("copyFilterBtn"),o=document.getElementById("downloadFilterBtn"),s=document.getElementById("toggle-help");t&&t.addEventListener("click",()=>this.filterJSON()),e&&e.addEventListener("click",()=>this.clearAll()),i&&i.addEventListener("click",()=>this.clearInput()),n&&n.addEventListener("click",()=>this.loadExample()),r&&r.addEventListener("click",()=>this.copyResult()),o&&o.addEventListener("click",()=>this.downloadResult()),s&&s.addEventListener("click",()=>this.closeDrawer());const l=document.getElementById("drawer-trigger");l&&l.addEventListener("click",()=>this.openDrawer()),document.querySelectorAll(".example-item").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-expression");e&&this.jsonPathInput&&(this.jsonPathInput.value=e,this.filterJSON())})}),this.jsonPathInput&&this.jsonPathInput.addEventListener("input",()=>{this.debounce(()=>this.filterJSON(),300)()}),this.setupDynamicHeight()}debounce(t,e){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{clearTimeout(i),t(...n)},e)}}filterJSON(){const t=this.inputEditor?.getValue().trim(),e=this.jsonPathInput?.value.trim();if(t&&e)try{const i=JSON.parse(t),r=n.query(i,e);this.displayResults(r),this.updateResultInfo(r)}catch(t){const e=t instanceof Error?t.message:"Unknown error";this.displayError(`Error: ${e}`)}else this.clearResults()}displayResults(t){if(!this.outputEditor)return;if(0===t.length)return void this.outputEditor.setValue("No matches found");let e;e=1===t.length?JSON.stringify(t[0],null,2):JSON.stringify(t,null,2),this.outputEditor.setValue(e)}displayError(t){this.outputEditor&&this.outputEditor.setValue(t),this.clearResultInfo()}updateResultInfo(t){if(this.resultCount&&(this.resultCount.textContent=`Found ${t.length} result${1!==t.length?"s":""}`),this.resultType&&t.length>0){const e=t[0],i=Array.isArray(e)?"Array":typeof e;this.resultType.textContent=`Type: ${i}`}}clearResultInfo(){this.resultCount&&(this.resultCount.textContent=""),this.resultType&&(this.resultType.textContent="")}clearResults(){this.outputEditor&&this.outputEditor.setValue(""),this.clearResultInfo()}clearInput(){this.inputEditor&&this.inputEditor.setValue("")}clearAll(){this.inputEditor&&this.inputEditor.setValue(""),this.jsonPathInput&&(this.jsonPathInput.value=""),this.clearResults()}loadExample(){this.inputEditor&&this.inputEditor.setValue(JSON.stringify({store:{book:[{category:"reference",author:"Nigel Rees",title:"Sayings of the Century",price:8.95},{category:"fiction",author:"Evelyn Waugh",title:"Sword of Honour",price:12.99},{category:"fiction",author:"Herman Melville",title:"Moby Dick",isbn:"0-553-21311-3",price:8.99},{category:"fiction",author:"J. R. R. Tolkien",title:"The Lord of the Rings",isbn:"0-395-19395-8",price:22.99}],bicycle:{color:"red",price:19.95}}},null,2)),this.jsonPathInput&&(this.jsonPathInput.value="$.store.book[*].title"),this.filterJSON()}async copyResult(){const t=this.outputEditor?.getValue();if(t)try{await navigator.clipboard.writeText(t),alert("Result copied to clipboard!")}catch(e){const i=document.createElement("textarea");i.value=t,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),alert("Result copied to clipboard!")}else alert("No result to copy")}downloadResult(){const t=this.outputEditor?.getValue();if(!t)return void alert("No result to download");const e=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download="jsonpath-result.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)}openDrawer(){const t=document.querySelector(".help-panel"),e=document.querySelector(".jsonpath-layout"),i=document.getElementById("drawer-trigger");t&&(t.classList.contains("open")?(t.classList.remove("open"),t.classList.add("hidden"),e&&e.classList.remove("drawer-open"),i&&(i.style.display="flex")):(t.classList.remove("hidden"),t.classList.add("open"),e&&e.classList.add("drawer-open"),i&&(i.style.display="none")))}closeDrawer(){const t=document.querySelector(".help-panel"),e=document.querySelector(".jsonpath-layout"),i=document.getElementById("drawer-trigger");t&&(t.classList.remove("open"),t.classList.add("hidden"),e&&e.classList.remove("drawer-open"),i&&(i.style.display="flex"))}toggleHelpPanel(){const t=document.querySelector(".help-panel"),e=document.querySelector(".jsonpath-layout");t&&e&&(t.classList.contains("hidden")?(t.classList.remove("hidden"),e.style.gridTemplateColumns="2fr 1fr"):(t.classList.add("hidden"),e.style.gridTemplateColumns="1fr"))}setupDynamicHeight(){if(!this.inputEditor)return;const t=this.inputEditor.getWrapperElement();t&&(this.inputEditor.on("focus",()=>{t.classList.add("cm-input-focused"),setTimeout(()=>{this.inputEditor.refresh()},350)}),this.inputEditor.on("blur",()=>{t.classList.remove("cm-input-focused"),setTimeout(()=>{this.inputEditor.refresh()},350)}))}}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("jsonFilterInput")&&(console.log("Initializing JSONPathFilter for jsonfilter page"),new s)})}},i={};function n(t){var r=i[t];if(void 0!==r)return r.exports;var o=i[t]={exports:{}};return e[t].call(o.exports,o,o.exports,n),o.exports}n.m=e,t=[],n.O=(e,i,r,o)=>{if(!i){var s=1/0;for(c=0;c<t.length;c++){for(var[i,r,o]=t[c],l=!0,a=0;a<i.length;a++)(!1&o||s>=o)&&Object.keys(n.O).every(t=>n.O[t](i[a]))?i.splice(a--,1):(l=!1,o<s&&(s=o));if(l){t.splice(c--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[i,r,o]},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.j=7,(()=>{var t={7:0,715:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var r,o,[s,l,a]=i,u=0;if(s.some(e=>0!==t[e])){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(a)var c=a(n)}for(e&&e(i);u<s.length;u++)o=s[u],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(c)},i=self.webpackChunkjson_utils=self.webpackChunkjson_utils||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var r=n.O(void 0,[96,715],()=>n(177));r=n.O(r)})();